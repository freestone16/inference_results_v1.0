[2021-03-15 14:08:41,087 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-15 14:08:41,165 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-15 14:08:41,177 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-15 14:08:41,177 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-15 14:08:41,178 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-15 14:08:41,178 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 14:08:41,333 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 14:08:41,334 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-14.08.37/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 14:08:41,334 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-14.08.37
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 14:08:42.284515 39915 main_dlrm.cc:138] Found 8 GPUs
I0315 14:08:42.288589 39915 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 14:08:47.798614 39915 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 14:08:47.798652 39915 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 14:08:47.798666 39915 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 14:08:47.799249 39925 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 14:08:47.799962 39926 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 14:08:47.800308 39927 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 14:08:47.800469 39929 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 14:08:47.800725 39928 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 14:08:47.800942 39930 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 14:08:47.800997 39931 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 14:08:47.800997 39932 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 14:09:02.474838 39925 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:02.474876 39925 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:02.480998 39926 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:02.481050 39926 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:10.166163 39928 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:10.166215 39928 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:11.515856 39926 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:11.515908 39926 dlrm_server.cc:65] Context creation complete
I0315 14:09:11.515945 39926 dlrm_server.cc:70] Created streams
I0315 14:09:11.515952 39926 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:11.515956 39926 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:11.515962 39926 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:20.644495 39931 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:20.644600 39931 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:22.025279 39932 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:22.025318 39932 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:22.046233 39927 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:22.046262 39927 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:23.422653 39928 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.422768 39928 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.423247 39928 dlrm_server.cc:70] Created streams
I0315 14:09:23.423321 39928 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.423389 39928 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.423451 39928 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.423506 39925 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.423548 39925 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.424556 39925 dlrm_server.cc:70] Created streams
I0315 14:09:23.424564 39925 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.424568 39925 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.424571 39925 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.467474 39929 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:23.467530 39929 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:23.511651 39930 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:09:23.511706 39930 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:09:23.521095 39926 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:23.521138 39926 dlrm_server.cc:97] Setup complete
I0315 14:09:23.532546 39926 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:23.556282 39931 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.556349 39931 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.556537 39931 dlrm_server.cc:70] Created streams
I0315 14:09:23.556550 39931 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.556556 39931 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.556562 39931 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.616174 39932 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.616233 39932 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.616289 39932 dlrm_server.cc:70] Created streams
I0315 14:09:23.616298 39932 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.616304 39932 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.616310 39932 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.641916 39927 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.641916 39925 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:23.641970 39927 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.641981 39925 dlrm_server.cc:97] Setup complete
I0315 14:09:23.642012 39927 dlrm_server.cc:70] Created streams
I0315 14:09:23.642024 39927 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.642030 39927 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.642036 39927 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.656627 39925 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:23.686200 39929 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.686249 39929 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.686795 39929 dlrm_server.cc:70] Created streams
I0315 14:09:23.686805 39929 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.686811 39929 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.686817 39929 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.711103 39928 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:23.711153 39928 dlrm_server.cc:97] Setup complete
I0315 14:09:23.724187 39930 dlrm_server.cc:62] Setting profile = 0
I0315 14:09:23.724292 39930 dlrm_server.cc:65] Context creation complete
I0315 14:09:23.725263 39930 dlrm_server.cc:70] Created streams
I0315 14:09:23.725275 39930 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:09:23.725281 39930 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:09:23.725287 39930 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:09:23.726344 39928 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:23.968874 39931 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:23.968931 39931 dlrm_server.cc:97] Setup complete
I0315 14:09:23.981274 39931 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:24.143800 39927 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:24.143851 39927 dlrm_server.cc:97] Setup complete
I0315 14:09:24.143859 39932 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:24.143926 39932 dlrm_server.cc:97] Setup complete
I0315 14:09:24.159827 39927 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:24.162266 39932 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:24.165570 39929 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:24.165627 39929 dlrm_server.cc:97] Setup complete
I0315 14:09:24.180007 39929 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:24.264608 39930 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:09:24.264674 39930 dlrm_server.cc:97] Setup complete
I0315 14:09:24.275499 39930 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:09:24.529367 39926 dlrm_server.cc:302] Warmup complete, ran for 1.00478s.
I0315 14:09:24.650575 39925 dlrm_server.cc:302] Warmup complete, ran for 1.00581s.
I0315 14:09:24.728232 39928 dlrm_server.cc:302] Warmup complete, ran for 1.01293s.
I0315 14:09:24.975057 39931 dlrm_server.cc:302] Warmup complete, ran for 1.00328s.
I0315 14:09:25.150367 39932 dlrm_server.cc:302] Warmup complete, ran for 1.0036s.
I0315 14:09:25.155262 39927 dlrm_server.cc:302] Warmup complete, ran for 1.00815s.
I0315 14:09:25.168759 39929 dlrm_server.cc:302] Warmup complete, ran for 1.00022s.
I0315 14:09:25.269039 39930 dlrm_server.cc:302] Warmup complete, ran for 1.00095s.
I0315 14:09:25.272141 39915 main_dlrm.cc:251] Starting running actual test.
I0315 14:33:13.017148 39915 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.70

Min latency (ns)                : 142753
Max latency (ns)                : 51916866
Mean latency (ns)               : 1164051
50.00 percentile latency (ns)   : 896274
90.00 percentile latency (ns)   : 1471427
95.00 percentile latency (ns)   : 2394520
97.00 percentile latency (ns)   : 3925182
99.00 percentile latency (ns)   : 6682628
99.90 percentile latency (ns)   : 21378414

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 14:33:19,082 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
[2021-03-15 14:33:19,082 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 14:33:19,085 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 14:33:19,085 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-14.08.37/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 14:33:19,085 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 481127690.471
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-14.08.37
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 14:33:19.706694 39959 main_dlrm.cc:138] Found 8 GPUs
I0315 14:33:19.708631 39959 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 14:33:25.107784 39959 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 14:33:25.107823 39959 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 14:33:25.107836 39959 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 14:33:25.108752 39969 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 14:33:25.109107 39971 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 14:33:25.109436 39970 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 14:33:25.109552 39973 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 14:33:25.109679 39972 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 14:33:25.109758 39974 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 14:33:25.109850 39975 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 14:33:25.109918 39976 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 14:33:37.810436 39973 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:37.810484 39973 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:40.549046 39974 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:40.549137 39974 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:48.141577 39976 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:48.141665 39976 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:48.148491 39973 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:48.148542 39973 dlrm_server.cc:65] Context creation complete
I0315 14:33:48.148624 39973 dlrm_server.cc:70] Created streams
I0315 14:33:48.148633 39973 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:48.148635 39973 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:48.148638 39973 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:48.303475 39969 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:48.303521 39969 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:56.020957 39974 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:56.021071 39974 dlrm_server.cc:65] Context creation complete
I0315 14:33:56.022778 39974 dlrm_server.cc:70] Created streams
I0315 14:33:56.022805 39974 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:56.022812 39974 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:56.022819 39974 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:56.031667 39972 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:56.031710 39972 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:57.774255 39971 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:57.774312 39971 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:57.829409 39970 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:33:57.829494 39970 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:33:57.845176 39976 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:57.845218 39976 dlrm_server.cc:65] Context creation complete
I0315 14:33:57.845997 39976 dlrm_server.cc:70] Created streams
I0315 14:33:57.846010 39976 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:57.846017 39976 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:57.846024 39976 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:57.887755 39973 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:57.887781 39973 dlrm_server.cc:97] Setup complete
I0315 14:33:57.903239 39973 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:57.904834 39969 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:57.904896 39969 dlrm_server.cc:65] Context creation complete
I0315 14:33:57.904965 39969 dlrm_server.cc:70] Created streams
I0315 14:33:57.904978 39969 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:57.904985 39969 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:57.904992 39969 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:57.952667 39972 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:57.952699 39972 dlrm_server.cc:65] Context creation complete
I0315 14:33:57.952685 39974 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:57.952733 39974 dlrm_server.cc:97] Setup complete
I0315 14:33:57.952811 39972 dlrm_server.cc:70] Created streams
I0315 14:33:57.952823 39972 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:57.952829 39972 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:57.952836 39972 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:57.964911 39974 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:57.988044 39971 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:57.988106 39971 dlrm_server.cc:65] Context creation complete
I0315 14:33:57.988941 39971 dlrm_server.cc:70] Created streams
I0315 14:33:57.988958 39971 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:57.988967 39971 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:57.988976 39971 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:58.107759 39970 dlrm_server.cc:62] Setting profile = 0
I0315 14:33:58.107811 39970 dlrm_server.cc:65] Context creation complete
I0315 14:33:58.108172 39970 dlrm_server.cc:70] Created streams
I0315 14:33:58.108186 39970 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:33:58.108192 39970 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:33:58.108197 39970 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:33:58.140486 39976 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:58.140542 39976 dlrm_server.cc:97] Setup complete
I0315 14:33:58.153175 39976 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:58.166115 39969 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:58.166174 39969 dlrm_server.cc:97] Setup complete
I0315 14:33:58.179423 39969 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:58.361627 39972 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:58.361690 39972 dlrm_server.cc:97] Setup complete
I0315 14:33:58.374485 39972 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:58.399209 39971 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:58.399305 39971 dlrm_server.cc:97] Setup complete
I0315 14:33:58.415676 39971 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:58.545038 39970 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:33:58.545094 39970 dlrm_server.cc:97] Setup complete
I0315 14:33:58.561590 39970 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:33:58.891985 39973 dlrm_server.cc:302] Warmup complete, ran for 1.00067s.
I0315 14:33:58.955740 39974 dlrm_server.cc:302] Warmup complete, ran for 1.00027s.
I0315 14:33:59.144484 39976 dlrm_server.cc:302] Warmup complete, ran for 1.00123s.
I0315 14:33:59.367074 39972 dlrm_server.cc:302] Warmup complete, ran for 1.00134s.
I0315 14:33:59.402913 39971 dlrm_server.cc:302] Warmup complete, ran for 1.00031s.
I0315 14:33:59.551947 39970 dlrm_server.cc:302] Warmup complete, ran for 1.0038s.
I0315 14:34:00.646361 39969 dlrm_server.cc:302] Warmup complete, ran for 2.44768s.
I0315 14:34:00.651110 39975 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:34:00.651163 39975 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:34:00.683044 39975 dlrm_server.cc:62] Setting profile = 0
I0315 14:34:00.683089 39975 dlrm_server.cc:65] Context creation complete
I0315 14:34:00.683136 39975 dlrm_server.cc:70] Created streams
I0315 14:34:00.683142 39975 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:34:00.683145 39975 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:34:00.683148 39975 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:34:00.723891 39975 dlrm_server.cc:96] Created copy streams and buffers
I0315 14:34:00.723939 39975 dlrm_server.cc:97] Setup complete
I0315 14:34:00.731937 39975 dlrm_server.cc:285] Running warmup for 1s.
I0315 14:34:01.726974 39975 dlrm_server.cc:302] Warmup complete, ran for 1.00024s.
I0315 14:34:01.731099 39959 main_dlrm.cc:251] Starting running actual test.
I0315 14:57:21.694774 39959 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.94

Min latency (ns)                : 143494
Max latency (ns)                : 97841056
Mean latency (ns)               : 1201596
50.00 percentile latency (ns)   : 880648
90.00 percentile latency (ns)   : 1457195
95.00 percentile latency (ns)   : 2520065
97.00 percentile latency (ns)   : 4096553
99.00 percentile latency (ns)   : 7676858
99.90 percentile latency (ns)   : 27948413

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 14:57:27,923 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
User-item pairs per second: 481127690.471

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-15 14:59:25,422 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-15 14:59:25,500 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-15 14:59:25,507 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-15 14:59:25,508 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-15 14:59:25,508 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-15 14:59:25,508 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 14:59:25,603 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 14:59:25,603 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-14.59.22/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 14:59:25,603 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-14.59.22
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 14:59:26.356619 40120 main_dlrm.cc:138] Found 8 GPUs
I0315 14:59:26.358573 40120 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 14:59:31.807824 40120 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 14:59:31.807868 40120 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 14:59:31.807885 40120 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 14:59:31.808835 40131 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 14:59:31.808905 40130 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 14:59:31.809182 40132 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 14:59:31.809270 40133 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 14:59:31.809352 40134 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 14:59:31.809389 40136 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 14:59:31.809487 40137 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 14:59:31.809568 40135 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 14:59:50.213054 40130 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:59:50.213104 40130 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:59:50.289295 40133 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:59:50.289542 40133 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:59:51.737962 40134 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:59:51.738023 40134 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:59:53.119822 40133 dlrm_server.cc:62] Setting profile = 0
I0315 14:59:53.119872 40133 dlrm_server.cc:65] Context creation complete
I0315 14:59:53.119908 40133 dlrm_server.cc:70] Created streams
I0315 14:59:53.119913 40133 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 14:59:53.119918 40133 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 14:59:53.119922 40133 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 14:59:53.123739 40135 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:59:53.123792 40135 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 14:59:56.293197 40136 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 14:59:56.293252 40136 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:00:05.206328 40130 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.206494 40130 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.206768 40130 dlrm_server.cc:70] Created streams
I0315 15:00:05.206838 40130 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.206847 40130 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.206853 40130 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.216128 40134 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.216195 40134 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.216277 40134 dlrm_server.cc:70] Created streams
I0315 15:00:05.216290 40134 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.216310 40134 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.216378 40134 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.377502 40131 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:00:05.377528 40131 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:00:05.402031 40137 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:00:05.402060 40137 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:00:05.424304 40135 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.424365 40135 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.424413 40135 dlrm_server.cc:70] Created streams
I0315 15:00:05.424423 40135 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.424429 40135 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.424437 40135 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.480195 40132 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:00:05.480226 40132 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:00:05.497376 40133 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:05.497422 40133 dlrm_server.cc:97] Setup complete
I0315 15:00:05.512403 40133 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:05.590270 40136 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.590322 40136 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.591401 40136 dlrm_server.cc:70] Created streams
I0315 15:00:05.591413 40136 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.591418 40136 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.591423 40136 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.644284 40131 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.644337 40131 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.644373 40131 dlrm_server.cc:70] Created streams
I0315 15:00:05.644382 40131 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.644389 40131 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.644395 40131 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.651446 40130 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:05.651496 40130 dlrm_server.cc:97] Setup complete
I0315 15:00:05.665549 40130 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:05.685170 40134 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:05.685196 40134 dlrm_server.cc:97] Setup complete
I0315 15:00:05.700409 40134 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:05.709113 40137 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.709177 40137 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.709290 40137 dlrm_server.cc:70] Created streams
I0315 15:00:05.709301 40137 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.709307 40137 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.709314 40137 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.740062 40132 dlrm_server.cc:62] Setting profile = 0
I0315 15:00:05.740090 40132 dlrm_server.cc:65] Context creation complete
I0315 15:00:05.740720 40132 dlrm_server.cc:70] Created streams
I0315 15:00:05.740729 40132 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:00:05.740736 40132 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:00:05.740797 40132 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:00:05.855496 40135 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:05.855520 40135 dlrm_server.cc:97] Setup complete
I0315 15:00:05.879699 40135 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:06.205461 40136 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:06.205536 40136 dlrm_server.cc:97] Setup complete
I0315 15:00:06.234347 40136 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:06.402976 40131 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:06.403054 40131 dlrm_server.cc:97] Setup complete
I0315 15:00:06.435348 40131 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:06.492132 40137 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:06.492199 40137 dlrm_server.cc:97] Setup complete
I0315 15:00:06.501423 40133 dlrm_server.cc:302] Warmup complete, ran for 1.00056s.
I0315 15:00:06.519902 40132 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:00:06.519997 40132 dlrm_server.cc:97] Setup complete
I0315 15:00:06.525451 40137 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:06.555212 40132 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:00:06.664876 40130 dlrm_server.cc:302] Warmup complete, ran for 1.01054s.
I0315 15:00:06.700991 40134 dlrm_server.cc:302] Warmup complete, ran for 1.01296s.
I0315 15:00:06.868238 40135 dlrm_server.cc:302] Warmup complete, ran for 1.00995s.
I0315 15:00:07.209918 40136 dlrm_server.cc:302] Warmup complete, ran for 1.00139s.
I0315 15:00:07.407124 40131 dlrm_server.cc:302] Warmup complete, ran for 1.00135s.
I0315 15:00:07.498592 40137 dlrm_server.cc:302] Warmup complete, ran for 1.00247s.
I0315 15:00:07.525928 40132 dlrm_server.cc:302] Warmup complete, ran for 1.00242s.
I0315 15:00:07.528556 40120 main_dlrm.cc:251] Starting running actual test.
I0315 15:23:35.367408 40120 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.05

Min latency (ns)                : 158550
Max latency (ns)                : 71695573
Mean latency (ns)               : 1177760
50.00 percentile latency (ns)   : 885214
90.00 percentile latency (ns)   : 1453685
95.00 percentile latency (ns)   : 2444769
97.00 percentile latency (ns)   : 4030322
99.00 percentile latency (ns)   : 7171788
99.90 percentile latency (ns)   : 24395126

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

11 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 15:23:41,291 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
[2021-03-15 15:23:41,292 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 15:23:41,294 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 15:23:41,294 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-14.59.22/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 15:23:41,294 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 481127690.471
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-14.59.22
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 15:23:41.924401 40164 main_dlrm.cc:138] Found 8 GPUs
I0315 15:23:41.926429 40164 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 15:23:47.252368 40164 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 15:23:47.252403 40164 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 15:23:47.252424 40164 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 15:23:47.253401 40175 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 15:23:47.253726 40174 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 15:23:47.253871 40180 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 15:23:47.254057 40177 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 15:23:47.254115 40178 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 15:23:47.254245 40179 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 15:23:47.254361 40176 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 15:23:47.254398 40181 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 15:23:59.173367 40174 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:23:59.173403 40174 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:23:59.233280 40175 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:23:59.233330 40175 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:00.634714 40178 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:00.634775 40178 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:09.662006 40175 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:09.662082 40175 dlrm_server.cc:65] Context creation complete
I0315 15:24:09.662158 40175 dlrm_server.cc:70] Created streams
I0315 15:24:09.662171 40175 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:09.662178 40175 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:09.662185 40175 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:09.728659 40176 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:09.728716 40176 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:17.460099 40179 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:17.460191 40179 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:17.512378 40177 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:17.512436 40177 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:17.538615 40174 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:17.538659 40174 dlrm_server.cc:65] Context creation complete
I0315 15:24:17.538717 40174 dlrm_server.cc:70] Created streams
I0315 15:24:17.538727 40174 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:17.538734 40174 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:17.538739 40174 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:17.588133 40175 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:17.588178 40175 dlrm_server.cc:97] Setup complete
I0315 15:24:17.599900 40175 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:17.643909 40178 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:17.643954 40178 dlrm_server.cc:65] Context creation complete
I0315 15:24:17.644032 40178 dlrm_server.cc:70] Created streams
I0315 15:24:17.644040 40178 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:17.644045 40178 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:17.644050 40178 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:17.709218 40176 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:17.709264 40176 dlrm_server.cc:65] Context creation complete
I0315 15:24:17.709862 40176 dlrm_server.cc:70] Created streams
I0315 15:24:17.709872 40176 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:17.709878 40176 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:17.709884 40176 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:17.771500 40174 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:17.771574 40174 dlrm_server.cc:97] Setup complete
I0315 15:24:17.781060 40179 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:17.781145 40179 dlrm_server.cc:65] Context creation complete
I0315 15:24:17.781276 40179 dlrm_server.cc:70] Created streams
I0315 15:24:17.781286 40179 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:17.781292 40179 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:17.781299 40179 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:17.784307 40174 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:17.809239 40177 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:17.809288 40177 dlrm_server.cc:65] Context creation complete
I0315 15:24:17.809329 40177 dlrm_server.cc:70] Created streams
I0315 15:24:17.809338 40177 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:17.809345 40177 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:17.809350 40177 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:17.856560 40178 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:17.856608 40178 dlrm_server.cc:97] Setup complete
I0315 15:24:17.870028 40178 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:17.973471 40176 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:17.973527 40176 dlrm_server.cc:97] Setup complete
I0315 15:24:17.987207 40176 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:18.063012 40179 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:18.063068 40179 dlrm_server.cc:97] Setup complete
I0315 15:24:18.080801 40179 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:18.140982 40177 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:18.141196 40177 dlrm_server.cc:97] Setup complete
I0315 15:24:18.162259 40177 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:18.591749 40175 dlrm_server.cc:302] Warmup complete, ran for 1.0001s.
I0315 15:24:18.862236 40178 dlrm_server.cc:302] Warmup complete, ran for 1.00292s.
I0315 15:24:18.996507 40176 dlrm_server.cc:302] Warmup complete, ran for 1.01892s.
I0315 15:24:19.069027 40179 dlrm_server.cc:302] Warmup complete, ran for 1.0032s.
I0315 15:24:19.153272 40177 dlrm_server.cc:302] Warmup complete, ran for 1.00855s.
I0315 15:24:20.269714 40174 dlrm_server.cc:302] Warmup complete, ran for 2.46463s.
I0315 15:24:20.325210 40180 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:20.325270 40180 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:21.692361 40180 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:21.692409 40180 dlrm_server.cc:65] Context creation complete
I0315 15:24:21.692432 40180 dlrm_server.cc:70] Created streams
I0315 15:24:21.692436 40180 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:21.692440 40180 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:21.692441 40180 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:21.715786 40181 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:24:21.715819 40181 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:24:21.750767 40180 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:21.750828 40180 dlrm_server.cc:97] Setup complete
I0315 15:24:21.760066 40180 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:21.780455 40181 dlrm_server.cc:62] Setting profile = 0
I0315 15:24:21.780544 40181 dlrm_server.cc:65] Context creation complete
I0315 15:24:21.780758 40181 dlrm_server.cc:70] Created streams
I0315 15:24:21.780762 40181 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:24:21.780768 40181 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:24:21.780771 40181 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:24:21.827406 40181 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:24:21.827455 40181 dlrm_server.cc:97] Setup complete
I0315 15:24:21.835831 40181 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:24:22.757061 40180 dlrm_server.cc:302] Warmup complete, ran for 1.00319s.
I0315 15:24:22.832356 40181 dlrm_server.cc:302] Warmup complete, ran for 1.00098s.
I0315 15:24:22.836004 40164 main_dlrm.cc:251] Starting running actual test.
I0315 15:47:40.030874 40164 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781562.85

Min latency (ns)                : 142083
Max latency (ns)                : 62823618
Mean latency (ns)               : 1216245
50.00 percentile latency (ns)   : 904086
90.00 percentile latency (ns)   : 1537394
95.00 percentile latency (ns)   : 2604440
97.00 percentile latency (ns)   : 4108619
99.00 percentile latency (ns)   : 7278343
99.90 percentile latency (ns)   : 26528171

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 15:47:46,027 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
User-item pairs per second: 481127690.471

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-15 15:47:49,096 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-15 15:47:49,173 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-15 15:47:49,180 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-15 15:47:49,180 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-15 15:47:49,181 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-15 15:47:49,181 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 15:47:49,261 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 15:47:49,261 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-15.47.46/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 15:47:49,261 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-15.47.46
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 15:47:50.022074 40325 main_dlrm.cc:138] Found 8 GPUs
I0315 15:47:50.024125 40325 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 15:47:55.306349 40325 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 15:47:55.306383 40325 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 15:47:55.306394 40325 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 15:47:55.307392 40336 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 15:47:55.307641 40338 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 15:47:55.307729 40337 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 15:47:55.307869 40339 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 15:47:55.308001 40335 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 15:47:55.308218 40341 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 15:47:55.308223 40340 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 15:47:55.308291 40342 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 15:48:13.307474 40335 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:13.307524 40335 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:13.437804 40338 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:13.437862 40338 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:14.899502 40341 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:14.899564 40341 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:16.637812 40336 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:16.637861 40336 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:24.125808 40341 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:24.125906 40341 dlrm_server.cc:65] Context creation complete
I0315 15:48:24.125954 40341 dlrm_server.cc:70] Created streams
I0315 15:48:24.125963 40341 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:24.125977 40341 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:24.125986 40341 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:24.128576 40338 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:24.128665 40338 dlrm_server.cc:65] Context creation complete
I0315 15:48:24.128751 40338 dlrm_server.cc:70] Created streams
I0315 15:48:24.128770 40338 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:24.128787 40338 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:24.128808 40338 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.438776 40337 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:28.438832 40337 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:28.459360 40340 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:28.459497 40340 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:28.460135 40335 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.460172 40335 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.460227 40335 dlrm_server.cc:70] Created streams
I0315 15:48:28.460237 40335 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.460242 40335 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.460248 40335 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.480742 40342 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:28.480779 40342 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:28.489889 40336 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.489953 40336 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.490041 40336 dlrm_server.cc:70] Created streams
I0315 15:48:28.490067 40336 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.490075 40336 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.490082 40336 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.571187 40339 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 15:48:28.571238 40339 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 15:48:28.621014 40341 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:28.621062 40341 dlrm_server.cc:97] Setup complete
I0315 15:48:28.621115 40338 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:28.621156 40338 dlrm_server.cc:97] Setup complete
I0315 15:48:28.636799 40338 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:28.637133 40341 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:28.674460 40337 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.674526 40337 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.674562 40337 dlrm_server.cc:70] Created streams
I0315 15:48:28.674571 40337 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.674576 40337 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.674582 40337 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.769508 40335 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:28.769556 40335 dlrm_server.cc:97] Setup complete
I0315 15:48:28.769562 40340 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.769649 40340 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.770591 40340 dlrm_server.cc:70] Created streams
I0315 15:48:28.770601 40340 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.770606 40340 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.770612 40340 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.785427 40335 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:28.818481 40342 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.818536 40342 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.819460 40342 dlrm_server.cc:70] Created streams
I0315 15:48:28.819478 40342 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.819485 40342 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.819491 40342 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.836269 40339 dlrm_server.cc:62] Setting profile = 0
I0315 15:48:28.836971 40339 dlrm_server.cc:65] Context creation complete
I0315 15:48:28.837056 40336 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:28.837080 40339 dlrm_server.cc:70] Created streams
I0315 15:48:28.837085 40336 dlrm_server.cc:97] Setup complete
I0315 15:48:28.837088 40339 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 15:48:28.837095 40339 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 15:48:28.837100 40339 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 15:48:28.850504 40336 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:29.279484 40337 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:29.279547 40337 dlrm_server.cc:97] Setup complete
I0315 15:48:29.290874 40337 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:29.456313 40340 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:29.456389 40340 dlrm_server.cc:97] Setup complete
I0315 15:48:29.469846 40340 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:29.583463 40339 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:29.583546 40339 dlrm_server.cc:97] Setup complete
I0315 15:48:29.585235 40342 dlrm_server.cc:96] Created copy streams and buffers
I0315 15:48:29.585289 40342 dlrm_server.cc:97] Setup complete
I0315 15:48:29.598502 40342 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:29.601040 40339 dlrm_server.cc:285] Running warmup for 1s.
I0315 15:48:29.635092 40338 dlrm_server.cc:302] Warmup complete, ran for 1.00831s.
I0315 15:48:29.638602 40341 dlrm_server.cc:302] Warmup complete, ran for 1.01469s.
I0315 15:48:29.789013 40335 dlrm_server.cc:302] Warmup complete, ran for 1.01544s.
I0315 15:48:29.842561 40336 dlrm_server.cc:302] Warmup complete, ran for 1.00252s.
I0315 15:48:30.293241 40337 dlrm_server.cc:302] Warmup complete, ran for 1.01034s.
I0315 15:48:30.461800 40340 dlrm_server.cc:302] Warmup complete, ran for 1.00265s.
I0315 15:48:30.586894 40339 dlrm_server.cc:302] Warmup complete, ran for 1.00058s.
I0315 15:48:30.590081 40342 dlrm_server.cc:302] Warmup complete, ran for 1.00086s.
I0315 15:48:30.592715 40325 main_dlrm.cc:251] Starting running actual test.
I0315 16:11:52.838531 40325 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781563.99

Min latency (ns)                : 145014
Max latency (ns)                : 105523199
Mean latency (ns)               : 1181026
50.00 percentile latency (ns)   : 886703
90.00 percentile latency (ns)   : 1454766
95.00 percentile latency (ns)   : 2474216
97.00 percentile latency (ns)   : 4027922
99.00 percentile latency (ns)   : 7090775
99.90 percentile latency (ns)   : 25681879

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 16:11:58,793 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
[2021-03-15 16:11:58,794 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 16:11:58,796 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 16:11:58,796 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-15.47.46/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 16:11:58,796 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 481127690.471
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-15.47.46
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 16:11:59.433535 40369 main_dlrm.cc:138] Found 8 GPUs
I0315 16:11:59.435572 40369 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 16:12:04.947144 40369 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 16:12:04.947192 40369 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 16:12:04.947206 40369 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 16:12:04.948104 40379 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 16:12:04.948326 40381 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 16:12:04.948593 40382 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 16:12:04.948927 40380 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 16:12:04.949085 40384 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 16:12:04.949087 40385 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 16:12:04.949120 40386 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 16:12:04.949165 40383 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 16:12:28.614455 40381 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:28.614521 40381 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:28.687983 40381 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:28.688038 40381 dlrm_server.cc:65] Context creation complete
I0315 16:12:28.688067 40381 dlrm_server.cc:70] Created streams
I0315 16:12:28.688071 40381 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:28.688074 40381 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:28.688076 40381 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:31.401070 40380 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:31.401131 40380 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:31.406853 40385 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:31.406883 40385 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:39.107676 40383 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:39.107738 40383 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:40.824273 40382 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:40.824327 40382 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:42.236016 40381 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:42.236071 40381 dlrm_server.cc:97] Setup complete
I0315 16:12:42.243001 40379 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:42.243067 40379 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:42.249509 40381 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:42.290601 40380 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:42.290665 40380 dlrm_server.cc:65] Context creation complete
I0315 16:12:42.290796 40380 dlrm_server.cc:70] Created streams
I0315 16:12:42.290807 40380 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:42.290813 40380 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:42.290822 40380 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:42.293776 40384 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:42.293826 40384 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:43.242836 40381 dlrm_server.cc:302] Warmup complete, ran for 1.00332s.
I0315 16:12:43.847579 40382 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:43.847636 40382 dlrm_server.cc:65] Context creation complete
I0315 16:12:43.847666 40382 dlrm_server.cc:70] Created streams
I0315 16:12:43.847674 40382 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:43.847681 40382 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:43.847687 40382 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:43.848033 40385 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:43.848088 40385 dlrm_server.cc:65] Context creation complete
I0315 16:12:43.848090 40383 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:43.848518 40383 dlrm_server.cc:65] Context creation complete
I0315 16:12:43.848568 40385 dlrm_server.cc:70] Created streams
I0315 16:12:43.848577 40385 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:43.848588 40385 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:43.848589 40383 dlrm_server.cc:70] Created streams
I0315 16:12:43.848595 40385 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:43.848599 40383 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:43.848604 40383 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:43.848610 40383 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:43.857172 40386 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:12:43.857218 40386 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:12:43.973446 40384 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:43.973497 40384 dlrm_server.cc:65] Context creation complete
I0315 16:12:43.973526 40384 dlrm_server.cc:70] Created streams
I0315 16:12:43.973534 40384 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:43.973541 40384 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:43.973546 40384 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:43.983484 40379 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:43.983528 40379 dlrm_server.cc:65] Context creation complete
I0315 16:12:43.983599 40379 dlrm_server.cc:70] Created streams
I0315 16:12:43.983609 40379 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:43.983615 40379 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:43.983669 40379 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:44.001163 40380 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.001212 40380 dlrm_server.cc:97] Setup complete
I0315 16:12:44.014634 40380 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.093381 40386 dlrm_server.cc:62] Setting profile = 0
I0315 16:12:44.093428 40386 dlrm_server.cc:65] Context creation complete
I0315 16:12:44.093456 40386 dlrm_server.cc:70] Created streams
I0315 16:12:44.093466 40386 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:12:44.093472 40386 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:12:44.093478 40386 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:12:44.114724 40383 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.114743 40383 dlrm_server.cc:97] Setup complete
I0315 16:12:44.114754 40382 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.114799 40382 dlrm_server.cc:97] Setup complete
I0315 16:12:44.129318 40382 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.130122 40383 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.131906 40385 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.131951 40385 dlrm_server.cc:97] Setup complete
I0315 16:12:44.144632 40385 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.457398 40384 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.457455 40384 dlrm_server.cc:97] Setup complete
I0315 16:12:44.472484 40379 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.472554 40379 dlrm_server.cc:97] Setup complete
I0315 16:12:44.477011 40384 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.500703 40379 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:44.638731 40386 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:12:44.638798 40386 dlrm_server.cc:97] Setup complete
I0315 16:12:44.660789 40386 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:12:45.006067 40380 dlrm_server.cc:302] Warmup complete, ran for 1.00086s.
I0315 16:12:45.122197 40383 dlrm_server.cc:302] Warmup complete, ran for 1.00461s.
I0315 16:12:45.129846 40382 dlrm_server.cc:302] Warmup complete, ran for 1.01178s.
I0315 16:12:45.139375 40385 dlrm_server.cc:302] Warmup complete, ran for 1.00451s.
I0315 16:12:45.464548 40384 dlrm_server.cc:302] Warmup complete, ran for 1.00435s.
I0315 16:12:45.476161 40379 dlrm_server.cc:302] Warmup complete, ran for 1.00084s.
I0315 16:12:45.642364 40386 dlrm_server.cc:302] Warmup complete, ran for 1.00013s.
I0315 16:12:45.644939 40369 main_dlrm.cc:251] Starting running actual test.
I0315 16:36:13.054369 40369 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.49

Min latency (ns)                : 150004
Max latency (ns)                : 52642842
Mean latency (ns)               : 1172343
50.00 percentile latency (ns)   : 892681
90.00 percentile latency (ns)   : 1487233
95.00 percentile latency (ns)   : 2503284
97.00 percentile latency (ns)   : 4022219
99.00 percentile latency (ns)   : 6839797
99.90 percentile latency (ns)   : 22414070

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

11 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 16:36:18,982 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
User-item pairs per second: 481127690.471

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-15 16:36:22,022 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-15 16:36:22,099 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-15 16:36:22,107 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-15 16:36:22,107 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-15 16:36:22,108 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-15 16:36:22,108 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 16:36:22,178 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 16:36:22,178 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-16.36.19/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 16:36:22,178 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-16.36.19
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 16:36:22.934698 40530 main_dlrm.cc:138] Found 8 GPUs
I0315 16:36:22.937009 40530 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 16:36:28.607082 40530 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 16:36:28.607118 40530 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 16:36:28.607141 40530 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 16:36:28.607417 40540 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 16:36:28.608662 40541 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 16:36:28.608767 40542 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 16:36:28.609077 40544 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 16:36:28.609086 40543 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 16:36:28.609165 40545 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 16:36:28.609263 40546 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 16:36:28.609339 40547 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 16:36:45.402992 40540 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:45.403029 40540 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:45.449339 40542 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:45.449388 40542 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:54.773679 40543 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:54.773789 40543 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:56.203800 40541 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:56.203866 40541 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:56.210561 40542 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:56.210637 40542 dlrm_server.cc:65] Context creation complete
I0315 16:36:56.210873 40542 dlrm_server.cc:70] Created streams
I0315 16:36:56.210882 40542 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:56.210887 40542 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:56.210892 40542 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:57.673848 40546 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:57.673897 40546 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:57.690723 40543 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:57.690775 40543 dlrm_server.cc:65] Context creation complete
I0315 16:36:57.692021 40543 dlrm_server.cc:70] Created streams
I0315 16:36:57.692049 40543 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:57.692055 40543 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:57.692061 40543 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:57.725266 40540 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:57.725303 40540 dlrm_server.cc:65] Context creation complete
I0315 16:36:57.726235 40540 dlrm_server.cc:70] Created streams
I0315 16:36:57.726248 40540 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:57.726255 40540 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:57.726261 40540 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:57.738524 40547 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:36:57.738575 40547 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:36:57.796766 40541 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:57.796813 40541 dlrm_server.cc:65] Context creation complete
I0315 16:36:57.796840 40541 dlrm_server.cc:70] Created streams
I0315 16:36:57.796847 40541 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:57.796854 40541 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:57.796859 40541 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:57.826628 40542 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:57.826679 40542 dlrm_server.cc:97] Setup complete
I0315 16:36:57.838796 40542 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:57.925401 40546 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:57.925451 40546 dlrm_server.cc:65] Context creation complete
I0315 16:36:57.925482 40546 dlrm_server.cc:70] Created streams
I0315 16:36:57.925488 40546 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:57.925493 40546 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:57.925501 40546 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:57.977433 40543 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:57.977473 40543 dlrm_server.cc:97] Setup complete
I0315 16:36:57.989284 40543 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:58.062912 40547 dlrm_server.cc:62] Setting profile = 0
I0315 16:36:58.062956 40547 dlrm_server.cc:65] Context creation complete
I0315 16:36:58.063576 40547 dlrm_server.cc:70] Created streams
I0315 16:36:58.063587 40547 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:36:58.063593 40547 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:36:58.063598 40547 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:36:58.332897 40540 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:58.332948 40540 dlrm_server.cc:97] Setup complete
I0315 16:36:58.345636 40540 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:58.574502 40541 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:58.574551 40541 dlrm_server.cc:97] Setup complete
I0315 16:36:58.587684 40541 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:58.847357 40542 dlrm_server.cc:302] Warmup complete, ran for 1.01755s.
I0315 16:36:58.861804 40546 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:58.861852 40546 dlrm_server.cc:97] Setup complete
I0315 16:36:58.877081 40546 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:58.901669 40547 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:36:58.901746 40547 dlrm_server.cc:97] Setup complete
I0315 16:36:58.922531 40547 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:36:58.988765 40543 dlrm_server.cc:302] Warmup complete, ran for 1.0079s.
I0315 16:36:59.338107 40540 dlrm_server.cc:302] Warmup complete, ran for 1.00235s.
I0315 16:36:59.579154 40541 dlrm_server.cc:302] Warmup complete, ran for 1.00178s.
I0315 16:36:59.867154 40546 dlrm_server.cc:302] Warmup complete, ran for 1.00249s.
I0315 16:36:59.906358 40547 dlrm_server.cc:302] Warmup complete, ran for 1.00065s.
I0315 16:37:01.442867 40544 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:37:01.442909 40544 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:37:02.812498 40544 dlrm_server.cc:62] Setting profile = 0
I0315 16:37:02.812536 40544 dlrm_server.cc:65] Context creation complete
I0315 16:37:02.812573 40544 dlrm_server.cc:70] Created streams
I0315 16:37:02.812577 40544 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:37:02.812580 40544 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:37:02.812582 40544 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:37:02.830950 40545 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 16:37:02.830981 40545 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 16:37:02.875195 40544 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:37:02.875241 40544 dlrm_server.cc:97] Setup complete
I0315 16:37:02.885237 40544 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:37:02.890585 40545 dlrm_server.cc:62] Setting profile = 0
I0315 16:37:02.890651 40545 dlrm_server.cc:65] Context creation complete
I0315 16:37:02.890677 40545 dlrm_server.cc:70] Created streams
I0315 16:37:02.890683 40545 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 16:37:02.890686 40545 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 16:37:02.890688 40545 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 16:37:02.941159 40545 dlrm_server.cc:96] Created copy streams and buffers
I0315 16:37:02.941205 40545 dlrm_server.cc:97] Setup complete
I0315 16:37:02.950438 40545 dlrm_server.cc:285] Running warmup for 1s.
I0315 16:37:03.879083 40544 dlrm_server.cc:302] Warmup complete, ran for 1.00063s.
I0315 16:37:03.945612 40545 dlrm_server.cc:302] Warmup complete, ran for 1.001s.
I0315 16:37:03.948688 40530 main_dlrm.cc:251] Starting running actual test.
I0315 17:00:28.522888 40530 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781562.83

Min latency (ns)                : 144022
Max latency (ns)                : 59546797
Mean latency (ns)               : 1199752
50.00 percentile latency (ns)   : 894816
90.00 percentile latency (ns)   : 1478720
95.00 percentile latency (ns)   : 2513889
97.00 percentile latency (ns)   : 4100066
99.00 percentile latency (ns)   : 7378349
99.90 percentile latency (ns)   : 25885313

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 17:00:34,726 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
[2021-03-15 17:00:34,726 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 17:00:34,729 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 17:00:34,729 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-16.36.19/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 17:00:34,729 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 481127690.471
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-16.36.19
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 17:00:35.353354 40574 main_dlrm.cc:138] Found 8 GPUs
I0315 17:00:35.355387 40574 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 17:00:40.829612 40574 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 17:00:40.829648 40574 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 17:00:40.829658 40574 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 17:00:40.830190 40584 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 17:00:40.830663 40585 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 17:00:40.830868 40586 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 17:00:40.831073 40587 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 17:00:40.831223 40588 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 17:00:40.831292 40589 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 17:00:40.831463 40590 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 17:00:40.831496 40591 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 17:00:58.036273 40588 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:00:58.036353 40588 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:05.435401 40586 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:05.435452 40586 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:05.535109 40589 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:05.535179 40589 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:12.758563 40588 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:12.758657 40588 dlrm_server.cc:65] Context creation complete
I0315 17:01:12.758721 40588 dlrm_server.cc:70] Created streams
I0315 17:01:12.758731 40588 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:12.758738 40588 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:12.758742 40588 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:21.993759 40585 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:21.993795 40585 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:22.045959 40586 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:22.046007 40586 dlrm_server.cc:65] Context creation complete
I0315 17:01:22.046083 40586 dlrm_server.cc:70] Created streams
I0315 17:01:22.046092 40586 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:22.046094 40586 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:22.046097 40586 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.365191 40587 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:23.365229 40587 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:23.399082 40589 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:23.399235 40589 dlrm_server.cc:65] Context creation complete
I0315 17:01:23.399372 40589 dlrm_server.cc:70] Created streams
I0315 17:01:23.399384 40589 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:23.399389 40589 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:23.399395 40589 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.428252 40591 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:23.428308 40591 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:23.469539 40590 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:23.469614 40590 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:23.513667 40588 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:23.513722 40588 dlrm_server.cc:97] Setup complete
I0315 17:01:23.526521 40588 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:23.568862 40585 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:23.568920 40585 dlrm_server.cc:65] Context creation complete
I0315 17:01:23.569535 40585 dlrm_server.cc:70] Created streams
I0315 17:01:23.569547 40585 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:23.569561 40585 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:23.569571 40585 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.577359 40586 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:23.577423 40586 dlrm_server.cc:97] Setup complete
I0315 17:01:23.581459 40587 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:23.581504 40587 dlrm_server.cc:65] Context creation complete
I0315 17:01:23.581552 40587 dlrm_server.cc:70] Created streams
I0315 17:01:23.581559 40587 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:23.581565 40587 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:23.581573 40587 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.590795 40586 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:23.649415 40589 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:23.649456 40589 dlrm_server.cc:97] Setup complete
I0315 17:01:23.662045 40589 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:23.714802 40591 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:23.714867 40591 dlrm_server.cc:65] Context creation complete
I0315 17:01:23.715648 40591 dlrm_server.cc:70] Created streams
I0315 17:01:23.715659 40591 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:23.715715 40591 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:23.715723 40591 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.734803 40590 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:23.735314 40590 dlrm_server.cc:65] Context creation complete
I0315 17:01:23.735385 40590 dlrm_server.cc:70] Created streams
I0315 17:01:23.735394 40590 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:23.735402 40590 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:23.735410 40590 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:23.968773 40585 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:23.968834 40585 dlrm_server.cc:97] Setup complete
I0315 17:01:23.982206 40585 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:24.067787 40587 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:24.067922 40587 dlrm_server.cc:97] Setup complete
I0315 17:01:24.083372 40587 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:24.207437 40591 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:24.207582 40591 dlrm_server.cc:97] Setup complete
I0315 17:01:24.223453 40591 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:24.290037 40590 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:24.290202 40590 dlrm_server.cc:97] Setup complete
I0315 17:01:24.302862 40590 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:24.524827 40588 dlrm_server.cc:302] Warmup complete, ran for 1.00778s.
I0315 17:01:24.595413 40586 dlrm_server.cc:302] Warmup complete, ran for 1.01379s.
I0315 17:01:24.653928 40589 dlrm_server.cc:302] Warmup complete, ran for 1.00173s.
I0315 17:01:25.078042 40587 dlrm_server.cc:302] Warmup complete, ran for 1.00657s.
I0315 17:01:25.212615 40591 dlrm_server.cc:302] Warmup complete, ran for 1.00214s.
I0315 17:01:25.295150 40590 dlrm_server.cc:302] Warmup complete, ran for 1.00128s.
I0315 17:01:26.713039 40585 dlrm_server.cc:302] Warmup complete, ran for 2.74145s.
I0315 17:01:26.717033 40584 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:01:26.717052 40584 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:01:26.747150 40584 dlrm_server.cc:62] Setting profile = 0
I0315 17:01:26.747187 40584 dlrm_server.cc:65] Context creation complete
I0315 17:01:26.747205 40584 dlrm_server.cc:70] Created streams
I0315 17:01:26.747208 40584 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:01:26.747211 40584 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:01:26.747215 40584 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:01:26.782527 40584 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:01:26.782572 40584 dlrm_server.cc:97] Setup complete
I0315 17:01:26.789520 40584 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:01:27.787801 40584 dlrm_server.cc:302] Warmup complete, ran for 1.00123s.
I0315 17:01:27.791059 40574 main_dlrm.cc:251] Starting running actual test.
I0315 17:24:41.504127 40574 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781563.84

Min latency (ns)                : 144138
Max latency (ns)                : 58971585
Mean latency (ns)               : 1178089
50.00 percentile latency (ns)   : 891691
90.00 percentile latency (ns)   : 1467989
95.00 percentile latency (ns)   : 2455139
97.00 percentile latency (ns)   : 4009159
99.00 percentile latency (ns)   : 7026214
99.90 percentile latency (ns)   : 24186522

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 17:24:47,554 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
User-item pairs per second: 481127690.471

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-15 17:24:50,562 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-15 17:24:50,638 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-15 17:24:50,646 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-15 17:24:50,646 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-15 17:24:50,647 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-15 17:24:50,647 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 17:24:50,716 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 17:24:50,716 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-17.24.47/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 17:24:50,716 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-17.24.47
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 17:24:51.473083 40735 main_dlrm.cc:138] Found 8 GPUs
I0315 17:24:51.475062 40735 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 17:24:57.889366 40735 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 17:24:57.889406 40735 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 17:24:57.889416 40735 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 17:24:57.889962 40745 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 17:24:57.890065 40746 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 17:24:57.890882 40747 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 17:24:57.891017 40748 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 17:24:57.891111 40749 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 17:24:57.891283 40750 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 17:24:57.891346 40751 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 17:24:57.891422 40752 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 17:25:15.797680 40746 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:15.797719 40746 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:15.885955 40747 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:15.886013 40747 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:17.318630 40749 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:17.318681 40749 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:18.736553 40747 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:18.736682 40747 dlrm_server.cc:65] Context creation complete
I0315 17:25:18.737066 40747 dlrm_server.cc:70] Created streams
I0315 17:25:18.737078 40747 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:18.737084 40747 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:18.737088 40747 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:20.195801 40751 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:20.195855 40751 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:27.908190 40750 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:27.908421 40750 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:29.300338 40748 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:29.300386 40748 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:29.312532 40746 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.312548 40749 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.312574 40746 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.312633 40749 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.312819 40746 dlrm_server.cc:70] Created streams
I0315 17:25:29.312858 40746 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.312867 40746 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.312875 40746 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.312953 40749 dlrm_server.cc:70] Created streams
I0315 17:25:29.312973 40749 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.312980 40749 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.312989 40749 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.341691 40752 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:29.341750 40752 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:29.361158 40747 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:29.361202 40747 dlrm_server.cc:97] Setup complete
I0315 17:25:29.373569 40747 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:29.430301 40751 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.430577 40751 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.430649 40751 dlrm_server.cc:70] Created streams
I0315 17:25:29.430658 40751 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.430665 40751 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.430670 40751 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.483407 40750 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.484072 40750 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.484159 40750 dlrm_server.cc:70] Created streams
I0315 17:25:29.484179 40750 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.484190 40750 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.484198 40750 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.532816 40748 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.532871 40748 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.532917 40748 dlrm_server.cc:70] Created streams
I0315 17:25:29.532925 40748 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.532932 40748 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.532938 40748 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.659720 40752 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:29.659757 40752 dlrm_server.cc:65] Context creation complete
I0315 17:25:29.659782 40752 dlrm_server.cc:70] Created streams
I0315 17:25:29.659790 40752 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:29.659795 40752 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:29.659802 40752 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:29.668768 40749 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:29.668792 40749 dlrm_server.cc:97] Setup complete
I0315 17:25:29.668776 40746 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:29.668821 40746 dlrm_server.cc:97] Setup complete
I0315 17:25:29.682740 40749 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:29.682843 40746 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:29.809118 40751 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:29.809175 40751 dlrm_server.cc:97] Setup complete
I0315 17:25:29.824054 40751 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:30.030105 40748 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:30.030109 40750 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:30.030194 40748 dlrm_server.cc:97] Setup complete
I0315 17:25:30.030261 40750 dlrm_server.cc:97] Setup complete
I0315 17:25:30.044687 40750 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:30.048144 40748 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:30.074055 40752 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:30.074117 40752 dlrm_server.cc:97] Setup complete
I0315 17:25:30.095541 40752 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:30.381170 40747 dlrm_server.cc:302] Warmup complete, ran for 1.0159s.
I0315 17:25:30.675029 40749 dlrm_server.cc:302] Warmup complete, ran for 1.00338s.
I0315 17:25:30.813371 40751 dlrm_server.cc:302] Warmup complete, ran for 1.00119s.
I0315 17:25:31.042680 40748 dlrm_server.cc:302] Warmup complete, ran for 1.00883s.
I0315 17:25:31.042778 40750 dlrm_server.cc:302] Warmup complete, ran for 1.0098s.
I0315 17:25:31.080260 40752 dlrm_server.cc:302] Warmup complete, ran for 1.00333s.
I0315 17:25:32.561316 40746 dlrm_server.cc:302] Warmup complete, ran for 2.85242s.
I0315 17:25:32.572391 40745 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:25:32.572428 40745 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:25:32.603333 40745 dlrm_server.cc:62] Setting profile = 0
I0315 17:25:32.603376 40745 dlrm_server.cc:65] Context creation complete
I0315 17:25:32.603404 40745 dlrm_server.cc:70] Created streams
I0315 17:25:32.603408 40745 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:25:32.603410 40745 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:25:32.603413 40745 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:25:32.640480 40745 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:25:32.640529 40745 dlrm_server.cc:97] Setup complete
I0315 17:25:32.647192 40745 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:25:33.644311 40745 dlrm_server.cc:302] Warmup complete, ran for 1.00048s.
I0315 17:25:33.647970 40735 main_dlrm.cc:251] Starting running actual test.
I0315 17:48:56.980739 40735 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.15

Min latency (ns)                : 142131
Max latency (ns)                : 60152649
Mean latency (ns)               : 1166428
50.00 percentile latency (ns)   : 886805
90.00 percentile latency (ns)   : 1459825
95.00 percentile latency (ns)   : 2468850
97.00 percentile latency (ns)   : 4002318
99.00 percentile latency (ns)   : 6886019
99.90 percentile latency (ns)   : 22487773

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 17:49:03,162 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
[2021-03-15 17:49:03,162 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-15 17:49:03,165 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-15 17:49:03,165 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.15-17.24.47/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-15 17:49:03,165 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 481127690.471
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1780000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : True
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.15-17.24.47
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0315 17:49:03.786780 40779 main_dlrm.cc:138] Found 8 GPUs
I0315 17:49:03.788841 40779 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0315 17:49:09.445456 40779 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0315 17:49:09.445492 40779 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0315 17:49:09.445500 40779 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0315 17:49:09.446384 40789 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0315 17:49:09.446601 40790 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0315 17:49:09.446700 40791 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0315 17:49:09.446846 40792 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0315 17:49:09.446959 40793 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0315 17:49:09.447038 40794 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0315 17:49:09.447182 40796 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0315 17:49:09.447203 40795 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0315 17:49:33.189009 40792 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:33.189052 40792 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:33.255508 40792 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:33.255550 40792 dlrm_server.cc:65] Context creation complete
I0315 17:49:33.255570 40792 dlrm_server.cc:70] Created streams
I0315 17:49:33.255575 40792 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:33.255578 40792 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:33.255580 40792 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:34.616480 40789 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:34.616552 40789 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:42.278997 40794 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:42.279057 40794 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:45.326941 40791 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:45.327178 40791 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:45.356772 40790 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:45.356798 40790 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:46.790779 40795 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:46.790827 40795 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:48.165987 40792 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:48.166040 40792 dlrm_server.cc:97] Setup complete
I0315 17:49:48.169113 40796 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:48.169152 40796 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:48.176645 40793 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0315 17:49:48.176692 40793 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0315 17:49:48.181120 40792 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:48.216212 40789 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.216256 40789 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.216295 40789 dlrm_server.cc:70] Created streams
I0315 17:49:48.216305 40789 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.216312 40789 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.216320 40789 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.240245 40794 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.240290 40794 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.240885 40794 dlrm_server.cc:70] Created streams
I0315 17:49:48.240900 40794 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.240906 40794 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.240913 40794 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.302105 40791 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.302165 40791 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.302253 40791 dlrm_server.cc:70] Created streams
I0315 17:49:48.302261 40791 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.302268 40791 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.302274 40791 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.307512 40790 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.307554 40790 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.308614 40790 dlrm_server.cc:70] Created streams
I0315 17:49:48.308625 40790 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.308631 40790 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.308637 40790 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.386461 40795 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.386504 40795 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.387303 40795 dlrm_server.cc:70] Created streams
I0315 17:49:48.387315 40795 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.387321 40795 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.387327 40795 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.407263 40796 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.407290 40796 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.407315 40796 dlrm_server.cc:70] Created streams
I0315 17:49:48.407321 40796 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.407327 40796 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.407333 40796 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.501070 40793 dlrm_server.cc:62] Setting profile = 0
I0315 17:49:48.501113 40793 dlrm_server.cc:65] Context creation complete
I0315 17:49:48.501721 40793 dlrm_server.cc:70] Created streams
I0315 17:49:48.501732 40793 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0315 17:49:48.501739 40793 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0315 17:49:48.501744 40793 dlrm_server.cc:81] Profile - Output Volume: 1
I0315 17:49:48.564361 40789 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:48.564386 40789 dlrm_server.cc:97] Setup complete
I0315 17:49:48.577237 40789 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:48.722273 40794 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:48.722321 40794 dlrm_server.cc:97] Setup complete
I0315 17:49:48.734637 40794 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:48.859114 40791 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:48.859167 40791 dlrm_server.cc:97] Setup complete
I0315 17:49:48.876353 40791 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:48.974696 40790 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:48.974742 40790 dlrm_server.cc:97] Setup complete
I0315 17:49:48.991585 40790 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:49.086930 40795 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:49.086973 40795 dlrm_server.cc:97] Setup complete
I0315 17:49:49.103227 40795 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:49.165693 40796 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:49.165742 40796 dlrm_server.cc:97] Setup complete
I0315 17:49:49.166976 40793 dlrm_server.cc:96] Created copy streams and buffers
I0315 17:49:49.167039 40793 dlrm_server.cc:97] Setup complete
I0315 17:49:49.178840 40792 dlrm_server.cc:302] Warmup complete, ran for 1.00872s.
I0315 17:49:49.179908 40796 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:49.182128 40793 dlrm_server.cc:285] Running warmup for 1s.
I0315 17:49:49.567314 40789 dlrm_server.cc:302] Warmup complete, ran for 1.00009s.
I0315 17:49:49.727521 40794 dlrm_server.cc:302] Warmup complete, ran for 1.00239s.
I0315 17:49:49.872656 40791 dlrm_server.cc:302] Warmup complete, ran for 1.01s.
I0315 17:49:49.978125 40790 dlrm_server.cc:302] Warmup complete, ran for 1.00059s.
I0315 17:49:50.091598 40795 dlrm_server.cc:302] Warmup complete, ran for 1.00178s.
I0315 17:49:50.169920 40796 dlrm_server.cc:302] Warmup complete, ran for 1.00026s.
I0315 17:49:50.172670 40793 dlrm_server.cc:302] Warmup complete, ran for 1.00289s.
I0315 17:49:50.176424 40779 main_dlrm.cc:251] Starting running actual test.
I0315 18:13:18.864271 40779 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1781566.22
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1781564.21

Min latency (ns)                : 139062
Max latency (ns)                : 59263847
Mean latency (ns)               : 1182824
50.00 percentile latency (ns)   : 890989
90.00 percentile latency (ns)   : 1460252
95.00 percentile latency (ns)   : 2461624
97.00 percentile latency (ns)   : 4035116
99.00 percentile latency (ns)   : 7176750
99.90 percentile latency (ns)   : 25214898

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.78e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-15 18:13:25,024 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1781570.0, Result is VALID
User-item pairs per second: 481127690.471

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1781570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-18 13:06:16,971 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-18 13:06:17,050 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-18 13:06:17,058 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-18 13:06:17,058 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-18 13:06:17,059 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-18 13:06:17,059 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 13:06:17,119 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 13:06:17,119 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-13.06.13/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 13:06:17,119 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-13.06.13
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 13:06:17.879540 97726 main_dlrm.cc:138] Found 8 GPUs
I0318 13:06:17.881482 97726 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 13:06:23.481567 97726 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 13:06:23.481606 97726 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 13:06:23.481621 97726 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 13:06:23.482697 97736 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 13:06:23.483017 97738 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 13:06:23.483225 97742 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 13:06:23.483269 97739 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 13:06:23.483378 97740 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 13:06:23.483551 97741 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 13:06:23.483634 97737 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 13:06:23.483705 97743 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 13:06:41.945974 97739 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:41.946053 97739 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:43.462174 97736 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:43.462208 97736 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:43.472658 97740 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:43.472710 97740 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:43.473903 97739 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:43.473940 97739 dlrm_server.cc:65] Context creation complete
I0318 13:06:43.473984 97739 dlrm_server.cc:70] Created streams
I0318 13:06:43.473990 97739 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:43.473994 97739 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:43.473999 97739 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:52.881523 97737 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:52.881664 97737 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:54.297001 97738 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:54.297052 97738 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:55.647986 97740 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:55.649076 97740 dlrm_server.cc:65] Context creation complete
I0318 13:06:55.649880 97740 dlrm_server.cc:70] Created streams
I0318 13:06:55.649900 97740 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:55.649910 97740 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:55.649919 97740 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.069046 97743 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:57.069100 97743 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:57.070206 97736 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.070271 97736 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.071761 97736 dlrm_server.cc:70] Created streams
I0318 13:06:57.071781 97736 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.071787 97736 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.071791 97736 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.108916 97737 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.108952 97737 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.108978 97741 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:57.108995 97737 dlrm_server.cc:70] Created streams
I0318 13:06:57.109005 97741 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:57.109020 97737 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.109067 97737 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.109074 97737 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.153157 97738 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.153201 97738 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.153241 97738 dlrm_server.cc:70] Created streams
I0318 13:06:57.153249 97738 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.153256 97738 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.153262 97738 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.160810 97739 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.160856 97739 dlrm_server.cc:97] Setup complete
I0318 13:06:57.165663 97742 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:06:57.165706 97742 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:06:57.174798 97739 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:57.253530 97743 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.253571 97743 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.256116 97743 dlrm_server.cc:70] Created streams
I0318 13:06:57.256129 97743 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.256135 97743 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.256141 97743 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.305621 97741 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.305670 97741 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.305696 97741 dlrm_server.cc:70] Created streams
I0318 13:06:57.305706 97741 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.305713 97741 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.305719 97741 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.453845 97742 dlrm_server.cc:62] Setting profile = 0
I0318 13:06:57.453891 97742 dlrm_server.cc:65] Context creation complete
I0318 13:06:57.454638 97740 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.454680 97740 dlrm_server.cc:97] Setup complete
I0318 13:06:57.455029 97742 dlrm_server.cc:70] Created streams
I0318 13:06:57.455054 97742 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:06:57.455112 97742 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:06:57.455119 97742 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:06:57.466372 97740 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:57.506340 97736 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.506366 97736 dlrm_server.cc:97] Setup complete
I0318 13:06:57.520324 97736 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:57.600513 97737 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.600574 97737 dlrm_server.cc:97] Setup complete
I0318 13:06:57.611881 97737 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:57.657485 97738 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.657547 97738 dlrm_server.cc:97] Setup complete
I0318 13:06:57.670342 97738 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:57.908351 97743 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:57.908418 97743 dlrm_server.cc:97] Setup complete
I0318 13:06:57.921059 97743 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:58.020592 97741 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:58.020644 97741 dlrm_server.cc:97] Setup complete
I0318 13:06:58.034863 97741 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:58.102130 97742 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:06:58.102227 97742 dlrm_server.cc:97] Setup complete
I0318 13:06:58.116384 97742 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:06:58.181457 97739 dlrm_server.cc:302] Warmup complete, ran for 1.01561s.
I0318 13:06:58.461443 97740 dlrm_server.cc:302] Warmup complete, ran for 1.00298s.
I0318 13:06:58.512801 97736 dlrm_server.cc:302] Warmup complete, ran for 1.00286s.
I0318 13:06:58.607611 97737 dlrm_server.cc:302] Warmup complete, ran for 1.00344s.
I0318 13:06:58.665076 97738 dlrm_server.cc:302] Warmup complete, ran for 1.00319s.
I0318 13:06:58.916211 97743 dlrm_server.cc:302] Warmup complete, ran for 1.0042s.
I0318 13:06:59.025820 97741 dlrm_server.cc:302] Warmup complete, ran for 1.00034s.
I0318 13:06:59.110343 97742 dlrm_server.cc:302] Warmup complete, ran for 1.00169s.
I0318 13:06:59.113538 97726 main_dlrm.cc:251] Starting running actual test.
I0318 13:30:23.149094 97726 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786562.29

Min latency (ns)                : 195806
Max latency (ns)                : 77556544
Mean latency (ns)               : 2872325
50.00 percentile latency (ns)   : 2394880
90.00 percentile latency (ns)   : 4436341
95.00 percentile latency (ns)   : 5474396
97.00 percentile latency (ns)   : 6786500
99.00 percentile latency (ns)   : 14190317
99.90 percentile latency (ns)   : 31414525

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

11 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 13:30:29,162 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
[2021-03-18 13:30:29,162 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 13:30:29,165 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 13:30:29,165 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-13.06.13/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 13:30:29,165 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 482477981.761
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-13.06.13
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 13:30:29.786247 97770 main_dlrm.cc:138] Found 8 GPUs
I0318 13:30:29.788273 97770 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 13:30:35.193590 97770 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 13:30:35.193624 97770 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 13:30:35.193635 97770 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 13:30:35.194808 97781 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 13:30:35.194916 97785 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 13:30:35.195060 97780 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 13:30:35.195178 97784 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 13:30:35.195295 97783 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 13:30:35.195412 97782 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 13:30:35.195559 97786 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 13:30:35.195623 97787 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 13:30:47.561408 97784 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:30:47.561465 97784 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:30:48.911226 97784 dlrm_server.cc:62] Setting profile = 0
I0318 13:30:48.911273 97784 dlrm_server.cc:65] Context creation complete
I0318 13:30:48.911298 97784 dlrm_server.cc:70] Created streams
I0318 13:30:48.911300 97784 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:30:48.911303 97784 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:30:48.911306 97784 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:30:56.623598 97781 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:30:56.623673 97781 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:30:56.623836 97787 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:30:56.623873 97787 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:30:58.311870 97782 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:30:58.312088 97782 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:31:07.442787 97780 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:31:07.442869 97780 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:31:07.445041 97787 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:07.445206 97787 dlrm_server.cc:65] Context creation complete
I0318 13:31:07.447872 97787 dlrm_server.cc:70] Created streams
I0318 13:31:07.447926 97787 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:07.447935 97787 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:07.447942 97787 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:08.827078 97783 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:31:08.827078 97781 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:08.827167 97783 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:31:08.827208 97781 dlrm_server.cc:65] Context creation complete
I0318 13:31:08.831478 97781 dlrm_server.cc:70] Created streams
I0318 13:31:08.831508 97781 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:08.831516 97781 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:08.831523 97781 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:08.866624 97786 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:31:08.866670 97786 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:31:08.866698 97784 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:08.866772 97784 dlrm_server.cc:97] Setup complete
I0318 13:31:08.870820 97782 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:08.870843 97782 dlrm_server.cc:65] Context creation complete
I0318 13:31:08.871021 97782 dlrm_server.cc:70] Created streams
I0318 13:31:08.871028 97782 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:08.871032 97782 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:08.871037 97782 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:08.880498 97784 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:08.911226 97785 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:31:08.911267 97785 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:31:08.973888 97783 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:08.973930 97783 dlrm_server.cc:65] Context creation complete
I0318 13:31:08.974298 97783 dlrm_server.cc:70] Created streams
I0318 13:31:08.974308 97783 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:08.974318 97783 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:08.974325 97783 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:08.974347 97780 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:08.974381 97780 dlrm_server.cc:65] Context creation complete
I0318 13:31:08.974817 97780 dlrm_server.cc:70] Created streams
I0318 13:31:08.974830 97780 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:08.974838 97780 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:08.974845 97780 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:09.008175 97786 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:09.008226 97786 dlrm_server.cc:65] Context creation complete
I0318 13:31:09.009516 97786 dlrm_server.cc:70] Created streams
I0318 13:31:09.009526 97786 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:09.009532 97786 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:09.009539 97786 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:09.022305 97785 dlrm_server.cc:62] Setting profile = 0
I0318 13:31:09.022341 97785 dlrm_server.cc:65] Context creation complete
I0318 13:31:09.023198 97785 dlrm_server.cc:70] Created streams
I0318 13:31:09.023211 97785 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:31:09.023216 97785 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:31:09.023221 97785 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:31:09.096513 97787 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.096565 97787 dlrm_server.cc:97] Setup complete
I0318 13:31:09.109215 97787 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.145326 97781 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.145412 97781 dlrm_server.cc:97] Setup complete
I0318 13:31:09.161207 97781 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.170428 97782 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.170496 97782 dlrm_server.cc:97] Setup complete
I0318 13:31:09.184715 97782 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.428812 97780 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.428880 97783 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.428884 97780 dlrm_server.cc:97] Setup complete
I0318 13:31:09.428994 97783 dlrm_server.cc:97] Setup complete
I0318 13:31:09.442698 97780 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.443238 97783 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.573688 97786 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.573762 97786 dlrm_server.cc:97] Setup complete
I0318 13:31:09.575489 97785 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:31:09.575515 97785 dlrm_server.cc:97] Setup complete
I0318 13:31:09.590427 97786 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.590608 97785 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:31:09.875169 97784 dlrm_server.cc:302] Warmup complete, ran for 1.00449s.
I0318 13:31:10.109397 97787 dlrm_server.cc:302] Warmup complete, ran for 1.00903s.
I0318 13:31:10.162739 97781 dlrm_server.cc:302] Warmup complete, ran for 1.01279s.
I0318 13:31:10.195166 97782 dlrm_server.cc:302] Warmup complete, ran for 1.01996s.
I0318 13:31:10.435197 97780 dlrm_server.cc:302] Warmup complete, ran for 1.00258s.
I0318 13:31:10.438900 97783 dlrm_server.cc:302] Warmup complete, ran for 1.00563s.
I0318 13:31:10.579481 97786 dlrm_server.cc:302] Warmup complete, ran for 1.00104s.
I0318 13:31:10.581634 97785 dlrm_server.cc:302] Warmup complete, ran for 1.00159s.
I0318 13:31:10.586006 97770 main_dlrm.cc:251] Starting running actual test.
I0318 13:54:50.702679 97770 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786568.62

Min latency (ns)                : 205908
Max latency (ns)                : 55504821
Mean latency (ns)               : 2780592
50.00 percentile latency (ns)   : 2404015
90.00 percentile latency (ns)   : 4410141
95.00 percentile latency (ns)   : 5326897
97.00 percentile latency (ns)   : 6303044
99.00 percentile latency (ns)   : 9811207
99.90 percentile latency (ns)   : 24170198

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 13:54:56,827 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
User-item pairs per second: 482477981.761

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-18 13:54:59,855 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-18 13:54:59,932 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-18 13:54:59,940 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-18 13:54:59,940 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-18 13:54:59,941 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-18 13:54:59,941 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 13:55:00,005 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 13:55:00,005 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-13.54.56/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 13:55:00,005 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-13.54.56
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 13:55:00.775563 97931 main_dlrm.cc:138] Found 8 GPUs
I0318 13:55:00.777758 97931 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 13:55:06.401553 97931 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 13:55:06.401583 97931 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 13:55:06.401592 97931 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 13:55:06.402586 97941 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 13:55:06.402688 97946 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 13:55:06.402689 97942 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 13:55:06.403002 97944 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 13:55:06.403299 97945 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 13:55:06.403303 97943 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 13:55:06.403429 97947 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 13:55:06.403431 97948 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 13:55:24.182094 97946 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:55:24.182176 97946 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:55:31.679257 97945 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:55:31.679383 97945 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:55:31.682845 97946 dlrm_server.cc:62] Setting profile = 0
I0318 13:55:31.682893 97946 dlrm_server.cc:65] Context creation complete
I0318 13:55:31.682952 97946 dlrm_server.cc:70] Created streams
I0318 13:55:31.682960 97946 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:55:31.682965 97946 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:55:31.682971 97946 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:55:46.480181 97943 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:55:46.480300 97943 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:55:46.500146 97948 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:55:46.500186 97948 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:55:53.738047 97947 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:55:53.738112 97947 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:55:53.935865 97945 dlrm_server.cc:62] Setting profile = 0
I0318 13:55:53.935900 97945 dlrm_server.cc:65] Context creation complete
I0318 13:55:53.935992 97945 dlrm_server.cc:70] Created streams
I0318 13:55:53.936000 97945 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:55:53.936005 97945 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:55:53.936009 97945 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:55:55.679153 97943 dlrm_server.cc:62] Setting profile = 0
I0318 13:55:55.679198 97943 dlrm_server.cc:65] Context creation complete
I0318 13:55:55.679667 97943 dlrm_server.cc:70] Created streams
I0318 13:55:55.679688 97943 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:55:55.679693 97943 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:55:55.679697 97943 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:55:55.685990 97946 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:55:55.686044 97946 dlrm_server.cc:97] Setup complete
I0318 13:55:55.698118 97946 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:55:56.691378 97946 dlrm_server.cc:302] Warmup complete, ran for 1.00095s.
I0318 13:56:03.332954 97941 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:56:03.332995 97941 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:56:03.334568 97948 dlrm_server.cc:62] Setting profile = 0
I0318 13:56:03.334606 97948 dlrm_server.cc:65] Context creation complete
I0318 13:56:03.334667 97948 dlrm_server.cc:70] Created streams
I0318 13:56:03.334676 97948 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:56:03.334683 97948 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:56:03.334688 97948 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:56:03.339583 97947 dlrm_server.cc:62] Setting profile = 0
I0318 13:56:03.339594 97947 dlrm_server.cc:65] Context creation complete
I0318 13:56:03.341019 97947 dlrm_server.cc:70] Created streams
I0318 13:56:03.341032 97947 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:56:03.341037 97947 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:56:03.341042 97947 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:56:03.356528 97942 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:56:03.356554 97942 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:56:03.440666 97944 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 13:56:03.440807 97944 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 13:56:03.463271 97941 dlrm_server.cc:62] Setting profile = 0
I0318 13:56:03.463318 97941 dlrm_server.cc:65] Context creation complete
I0318 13:56:03.465740 97941 dlrm_server.cc:70] Created streams
I0318 13:56:03.465751 97941 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:56:03.465759 97941 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:56:03.465765 97941 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:56:03.486538 97945 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:03.486598 97945 dlrm_server.cc:97] Setup complete
I0318 13:56:03.499464 97945 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:03.533309 97942 dlrm_server.cc:62] Setting profile = 0
I0318 13:56:03.533352 97942 dlrm_server.cc:65] Context creation complete
I0318 13:56:03.533605 97942 dlrm_server.cc:70] Created streams
I0318 13:56:03.533617 97942 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:56:03.533624 97942 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:56:03.533630 97942 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:56:03.572414 97948 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:03.572499 97948 dlrm_server.cc:97] Setup complete
I0318 13:56:03.574348 97943 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:03.574396 97943 dlrm_server.cc:97] Setup complete
I0318 13:56:03.590317 97948 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:03.592027 97943 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:03.596879 97944 dlrm_server.cc:62] Setting profile = 0
I0318 13:56:03.596915 97944 dlrm_server.cc:65] Context creation complete
I0318 13:56:03.596982 97944 dlrm_server.cc:70] Created streams
I0318 13:56:03.596989 97944 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 13:56:03.596994 97944 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 13:56:03.596999 97944 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 13:56:03.628137 97947 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:03.628190 97947 dlrm_server.cc:97] Setup complete
I0318 13:56:03.644547 97947 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:03.940044 97941 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:03.940106 97941 dlrm_server.cc:97] Setup complete
I0318 13:56:03.957757 97941 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:04.017391 97942 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:04.017457 97942 dlrm_server.cc:97] Setup complete
I0318 13:56:04.042384 97942 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:04.129349 97944 dlrm_server.cc:96] Created copy streams and buffers
I0318 13:56:04.129412 97944 dlrm_server.cc:97] Setup complete
I0318 13:56:04.153105 97944 dlrm_server.cc:285] Running warmup for 1s.
I0318 13:56:04.498111 97945 dlrm_server.cc:302] Warmup complete, ran for 1.00785s.
I0318 13:56:04.579293 97948 dlrm_server.cc:302] Warmup complete, ran for 1.00296s.
I0318 13:56:04.588982 97943 dlrm_server.cc:302] Warmup complete, ran for 1.00981s.
I0318 13:56:04.634028 97947 dlrm_server.cc:302] Warmup complete, ran for 1.00214s.
I0318 13:56:04.946636 97941 dlrm_server.cc:302] Warmup complete, ran for 1.00288s.
I0318 13:56:05.024376 97942 dlrm_server.cc:302] Warmup complete, ran for 1.00299s.
I0318 13:56:05.134475 97944 dlrm_server.cc:302] Warmup complete, ran for 1.00069s.
I0318 13:56:05.137125 97931 main_dlrm.cc:251] Starting running actual test.
I0318 14:19:17.797032 97931 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786565.36

Min latency (ns)                : 194703
Max latency (ns)                : 56431980
Mean latency (ns)               : 2806484
50.00 percentile latency (ns)   : 2376025
90.00 percentile latency (ns)   : 4398138
95.00 percentile latency (ns)   : 5403806
97.00 percentile latency (ns)   : 6614878
99.00 percentile latency (ns)   : 12133871
99.90 percentile latency (ns)   : 26500490

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 14:19:23,786 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
[2021-03-18 14:19:23,787 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 14:19:23,789 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 14:19:23,789 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-13.54.56/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 14:19:23,789 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 482477981.761
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-13.54.56
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 14:19:24.419677 97975 main_dlrm.cc:138] Found 8 GPUs
I0318 14:19:24.421685 97975 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 14:19:30.312575 97975 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 14:19:30.312621 97975 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 14:19:30.312633 97975 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 14:19:30.313634 97986 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 14:19:30.313832 97988 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 14:19:30.314029 97990 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 14:19:30.314191 97991 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 14:19:30.314333 97989 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 14:19:30.314430 97987 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 14:19:30.314532 97985 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 14:19:30.314572 97992 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 14:19:41.337039 97990 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:41.337275 97990 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:19:42.742759 97990 dlrm_server.cc:62] Setting profile = 0
I0318 14:19:42.742799 97990 dlrm_server.cc:65] Context creation complete
I0318 14:19:42.742830 97990 dlrm_server.cc:70] Created streams
I0318 14:19:42.742835 97990 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:19:42.742836 97990 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:19:42.742839 97990 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:19:44.541815 97986 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:44.541848 97986 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:19:44.551010 97989 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:44.551059 97989 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:19:52.342154 97985 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:52.342214 97985 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:19:52.342422 97988 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:52.342470 97988 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:19:52.503624 97989 dlrm_server.cc:62] Setting profile = 0
I0318 14:19:52.503677 97989 dlrm_server.cc:65] Context creation complete
I0318 14:19:52.503724 97986 dlrm_server.cc:62] Setting profile = 0
I0318 14:19:52.503756 97986 dlrm_server.cc:65] Context creation complete
I0318 14:19:52.503737 97989 dlrm_server.cc:70] Created streams
I0318 14:19:52.503772 97989 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:19:52.503779 97989 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:19:52.503787 97989 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:19:52.503821 97986 dlrm_server.cc:70] Created streams
I0318 14:19:52.503834 97986 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:19:52.503840 97986 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:19:52.503846 97986 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:19:52.589421 97990 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:19:52.589462 97990 dlrm_server.cc:97] Setup complete
I0318 14:19:52.602470 97990 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:19:52.727802 97985 dlrm_server.cc:62] Setting profile = 0
I0318 14:19:52.727838 97985 dlrm_server.cc:65] Context creation complete
I0318 14:19:52.727864 97985 dlrm_server.cc:70] Created streams
I0318 14:19:52.727872 97985 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:19:52.727878 97985 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:19:52.727883 97985 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:19:52.771509 97988 dlrm_server.cc:62] Setting profile = 0
I0318 14:19:52.771555 97988 dlrm_server.cc:65] Context creation complete
I0318 14:19:52.772583 97988 dlrm_server.cc:70] Created streams
I0318 14:19:52.772609 97988 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:19:52.772656 97988 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:19:52.772662 97988 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:19:53.226483 97989 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:19:53.226531 97989 dlrm_server.cc:97] Setup complete
I0318 14:19:53.241631 97989 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:19:53.295209 97986 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:19:53.295259 97986 dlrm_server.cc:97] Setup complete
I0318 14:19:53.310770 97986 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:19:53.366086 97985 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:19:53.366132 97985 dlrm_server.cc:97] Setup complete
I0318 14:19:53.378140 97985 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:19:53.387130 97988 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:19:53.387193 97988 dlrm_server.cc:97] Setup complete
I0318 14:19:53.402464 97988 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:19:53.594208 97990 dlrm_server.cc:302] Warmup complete, ran for 1.00113s.
I0318 14:19:54.234318 97989 dlrm_server.cc:302] Warmup complete, ran for 1.00424s.
I0318 14:19:54.301263 97986 dlrm_server.cc:302] Warmup complete, ran for 1.00177s.
I0318 14:19:54.372016 97985 dlrm_server.cc:302] Warmup complete, ran for 1.00135s.
I0318 14:19:54.393182 97988 dlrm_server.cc:302] Warmup complete, ran for 1.00163s.
I0318 14:19:57.307798 97992 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:19:57.307883 97992 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:20:04.799610 97992 dlrm_server.cc:62] Setting profile = 0
I0318 14:20:04.799655 97992 dlrm_server.cc:65] Context creation complete
I0318 14:20:04.799685 97992 dlrm_server.cc:70] Created streams
I0318 14:20:04.799688 97992 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:20:04.799691 97992 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:20:04.799695 97992 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:20:06.347259 97987 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:20:06.347340 97987 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:20:06.392957 97991 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:20:06.393000 97991 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:20:06.423969 97987 dlrm_server.cc:62] Setting profile = 0
I0318 14:20:06.424013 97987 dlrm_server.cc:65] Context creation complete
I0318 14:20:06.424201 97987 dlrm_server.cc:70] Created streams
I0318 14:20:06.424209 97987 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:20:06.424214 97987 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:20:06.424219 97987 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:20:06.429803 97992 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:20:06.429821 97992 dlrm_server.cc:97] Setup complete
I0318 14:20:06.432199 97991 dlrm_server.cc:62] Setting profile = 0
I0318 14:20:06.432236 97991 dlrm_server.cc:65] Context creation complete
I0318 14:20:06.432263 97991 dlrm_server.cc:70] Created streams
I0318 14:20:06.432271 97991 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:20:06.432277 97991 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:20:06.432283 97991 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:20:06.441123 97992 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:20:06.519114 97987 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:20:06.519181 97987 dlrm_server.cc:97] Setup complete
I0318 14:20:06.525122 97991 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:20:06.525171 97991 dlrm_server.cc:97] Setup complete
I0318 14:20:06.532626 97987 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:20:06.536998 97991 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:20:07.437263 97992 dlrm_server.cc:302] Warmup complete, ran for 1.00385s.
I0318 14:20:07.529196 97991 dlrm_server.cc:302] Warmup complete, ran for 1.00044s.
I0318 14:20:07.529523 97987 dlrm_server.cc:302] Warmup complete, ran for 1.00606s.
I0318 14:20:07.533102 97975 main_dlrm.cc:251] Starting running actual test.
I0318 14:43:26.209102 97975 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786562.14

Min latency (ns)                : 193699
Max latency (ns)                : 66752093
Mean latency (ns)               : 2753449
50.00 percentile latency (ns)   : 2365469
90.00 percentile latency (ns)   : 4325318
95.00 percentile latency (ns)   : 5250431
97.00 percentile latency (ns)   : 6232770
99.00 percentile latency (ns)   : 10306791
99.90 percentile latency (ns)   : 24863926

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 14:43:32,283 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
User-item pairs per second: 482477981.761

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-18 14:43:35,320 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-18 14:43:35,397 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-18 14:43:35,404 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-18 14:43:35,404 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-18 14:43:35,405 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-18 14:43:35,405 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 14:43:35,497 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 14:43:35,497 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-14.43.32/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 14:43:35,497 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-14.43.32
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 14:43:36.251598 98136 main_dlrm.cc:138] Found 8 GPUs
I0318 14:43:36.253602 98136 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 14:43:42.054877 98136 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 14:43:42.054916 98136 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 14:43:42.054927 98136 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 14:43:42.056084 98146 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 14:43:42.056334 98147 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 14:43:42.056655 98149 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 14:43:42.056733 98150 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 14:43:42.056818 98148 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 14:43:42.057134 98151 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 14:43:42.058552 98152 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 14:43:42.058558 98153 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 14:44:05.798759 98149 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:05.798815 98149 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:05.846295 98149 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:05.846331 98149 dlrm_server.cc:65] Context creation complete
I0318 14:44:05.846356 98149 dlrm_server.cc:70] Created streams
I0318 14:44:05.846362 98149 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:05.846366 98149 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:05.846370 98149 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:14.917322 98148 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:14.917414 98148 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:14.954154 98146 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:14.954205 98146 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:14.965333 98152 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:14.965406 98152 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:18.126387 98147 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:18.126535 98147 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:19.449856 98148 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:19.449981 98148 dlrm_server.cc:65] Context creation complete
I0318 14:44:19.452857 98148 dlrm_server.cc:70] Created streams
I0318 14:44:19.452909 98148 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:19.452916 98148 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:19.452924 98148 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:19.512630 98152 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:19.512698 98152 dlrm_server.cc:65] Context creation complete
I0318 14:44:19.512856 98152 dlrm_server.cc:70] Created streams
I0318 14:44:19.512871 98152 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:19.512878 98152 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:19.512883 98152 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:19.513206 98149 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:19.513231 98149 dlrm_server.cc:97] Setup complete
I0318 14:44:19.529675 98149 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:20.522119 98149 dlrm_server.cc:302] Warmup complete, ran for 1.00464s.
I0318 14:44:21.025015 98151 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:21.025069 98151 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:21.077235 98146 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:21.077327 98146 dlrm_server.cc:65] Context creation complete
I0318 14:44:21.077390 98146 dlrm_server.cc:70] Created streams
I0318 14:44:21.077452 98146 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:21.077497 98146 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:21.077533 98146 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:21.093842 98153 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:21.093894 98153 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:21.093911 98150 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 14:44:21.094136 98150 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 14:44:21.103704 98147 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:21.103737 98147 dlrm_server.cc:65] Context creation complete
I0318 14:44:21.103771 98147 dlrm_server.cc:70] Created streams
I0318 14:44:21.103780 98147 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:21.103785 98147 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:21.103792 98147 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:21.155659 98151 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:21.155705 98151 dlrm_server.cc:65] Context creation complete
I0318 14:44:21.158257 98151 dlrm_server.cc:70] Created streams
I0318 14:44:21.158270 98151 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:21.158275 98151 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:21.158282 98151 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:21.234819 98148 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.234865 98148 dlrm_server.cc:97] Setup complete
I0318 14:44:21.245559 98148 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.268656 98153 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:21.268674 98150 dlrm_server.cc:62] Setting profile = 0
I0318 14:44:21.268690 98153 dlrm_server.cc:65] Context creation complete
I0318 14:44:21.268702 98150 dlrm_server.cc:65] Context creation complete
I0318 14:44:21.269654 98153 dlrm_server.cc:70] Created streams
I0318 14:44:21.269670 98153 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:21.269675 98153 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:21.269677 98150 dlrm_server.cc:70] Created streams
I0318 14:44:21.269682 98153 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:21.269691 98150 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 14:44:21.269713 98150 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 14:44:21.269721 98150 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 14:44:21.311647 98152 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.311697 98152 dlrm_server.cc:97] Setup complete
I0318 14:44:21.323125 98152 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.479723 98146 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.479773 98146 dlrm_server.cc:97] Setup complete
I0318 14:44:21.493760 98146 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.502007 98147 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.502072 98147 dlrm_server.cc:97] Setup complete
I0318 14:44:21.522810 98147 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.640177 98151 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.640240 98151 dlrm_server.cc:97] Setup complete
I0318 14:44:21.659801 98151 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.745404 98150 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.745505 98150 dlrm_server.cc:97] Setup complete
I0318 14:44:21.746951 98153 dlrm_server.cc:96] Created copy streams and buffers
I0318 14:44:21.746987 98153 dlrm_server.cc:97] Setup complete
I0318 14:44:21.771311 98153 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:21.775724 98150 dlrm_server.cc:285] Running warmup for 1s.
I0318 14:44:22.249054 98148 dlrm_server.cc:302] Warmup complete, ran for 1.00996s.
I0318 14:44:22.316856 98152 dlrm_server.cc:302] Warmup complete, ran for 1.00153s.
I0318 14:44:22.483544 98146 dlrm_server.cc:302] Warmup complete, ran for 1.00019s.
I0318 14:44:22.507366 98147 dlrm_server.cc:302] Warmup complete, ran for 1.00171s.
I0318 14:44:22.646634 98151 dlrm_server.cc:302] Warmup complete, ran for 1.00284s.
I0318 14:44:22.750105 98150 dlrm_server.cc:302] Warmup complete, ran for 1.00047s.
I0318 14:44:22.754371 98153 dlrm_server.cc:302] Warmup complete, ran for 1.00275s.
I0318 14:44:22.757248 98136 main_dlrm.cc:251] Starting running actual test.
I0318 15:07:52.176869 98136 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786569.11

Min latency (ns)                : 224194
Max latency (ns)                : 58211602
Mean latency (ns)               : 2804676
50.00 percentile latency (ns)   : 2393231
90.00 percentile latency (ns)   : 4420144
95.00 percentile latency (ns)   : 5417791
97.00 percentile latency (ns)   : 6561155
99.00 percentile latency (ns)   : 11123460
99.90 percentile latency (ns)   : 25497079

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

11 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 15:07:58,262 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
[2021-03-18 15:07:58,263 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 15:07:58,265 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 15:07:58,265 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-14.43.32/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 15:07:58,265 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 482477981.761
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-14.43.32
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 15:07:58.894546 98180 main_dlrm.cc:138] Found 8 GPUs
I0318 15:07:58.896535 98180 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 15:08:04.582185 98180 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 15:08:04.582217 98180 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 15:08:04.582226 98180 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 15:08:04.583556 98190 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 15:08:04.583657 98193 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 15:08:04.583743 98192 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 15:08:04.583878 98191 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 15:08:04.583988 98194 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 15:08:04.584132 98195 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 15:08:04.584365 98197 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 15:08:04.584372 98196 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 15:08:23.207041 98193 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:23.207093 98193 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:24.538936 98193 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:24.538962 98193 dlrm_server.cc:65] Context creation complete
I0318 15:08:24.539013 98193 dlrm_server.cc:70] Created streams
I0318 15:08:24.539018 98193 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:24.539021 98193 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:24.539024 98193 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:24.556762 98190 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:24.556807 98190 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:25.946060 98194 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:25.946125 98194 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:33.510360 98197 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:33.510470 98197 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:35.121023 98194 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:35.121148 98194 dlrm_server.cc:65] Context creation complete
I0318 15:08:35.122395 98192 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:35.122493 98192 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:35.122629 98194 dlrm_server.cc:70] Created streams
I0318 15:08:35.122663 98194 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:35.122673 98194 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:35.122679 98194 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:36.766114 98190 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:36.766166 98190 dlrm_server.cc:65] Context creation complete
I0318 15:08:36.766669 98190 dlrm_server.cc:70] Created streams
I0318 15:08:36.766701 98190 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:36.766708 98190 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:36.766716 98190 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:36.834939 98193 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:36.834969 98193 dlrm_server.cc:97] Setup complete
I0318 15:08:36.847261 98193 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:37.843981 98193 dlrm_server.cc:302] Warmup complete, ran for 1.00468s.
I0318 15:08:38.279312 98197 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:38.279372 98197 dlrm_server.cc:65] Context creation complete
I0318 15:08:38.279496 98197 dlrm_server.cc:70] Created streams
I0318 15:08:38.279506 98197 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:38.279512 98197 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:38.279517 98197 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:38.281195 98195 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:38.281273 98195 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:38.334928 98191 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:38.334988 98191 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:38.374688 98196 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:08:38.374734 98196 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:08:38.392354 98192 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:38.392406 98192 dlrm_server.cc:65] Context creation complete
I0318 15:08:38.393199 98192 dlrm_server.cc:70] Created streams
I0318 15:08:38.393211 98192 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:38.393218 98192 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:38.393225 98192 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:38.418661 98195 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:38.418694 98195 dlrm_server.cc:65] Context creation complete
I0318 15:08:38.419595 98195 dlrm_server.cc:70] Created streams
I0318 15:08:38.419606 98195 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:38.419611 98195 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:38.419616 98195 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:38.431620 98191 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:38.431663 98191 dlrm_server.cc:65] Context creation complete
I0318 15:08:38.432379 98191 dlrm_server.cc:70] Created streams
I0318 15:08:38.432391 98191 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:38.432400 98191 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:38.432410 98191 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:38.511299 98194 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.511344 98194 dlrm_server.cc:97] Setup complete
I0318 15:08:38.526028 98194 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.539746 98196 dlrm_server.cc:62] Setting profile = 0
I0318 15:08:38.539780 98196 dlrm_server.cc:65] Context creation complete
I0318 15:08:38.540532 98196 dlrm_server.cc:70] Created streams
I0318 15:08:38.540540 98196 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:08:38.540544 98196 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:08:38.540549 98196 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:08:38.561228 98190 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.561250 98190 dlrm_server.cc:97] Setup complete
I0318 15:08:38.576959 98190 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.586302 98197 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.586349 98197 dlrm_server.cc:97] Setup complete
I0318 15:08:38.602596 98197 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.730757 98192 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.730818 98192 dlrm_server.cc:97] Setup complete
I0318 15:08:38.747251 98192 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.774555 98195 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.774602 98195 dlrm_server.cc:97] Setup complete
I0318 15:08:38.793802 98195 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.827849 98191 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.827937 98191 dlrm_server.cc:97] Setup complete
I0318 15:08:38.851676 98191 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:38.889850 98196 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:08:38.889956 98196 dlrm_server.cc:97] Setup complete
I0318 15:08:38.921025 98196 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:08:39.517320 98194 dlrm_server.cc:302] Warmup complete, ran for 1.00231s.
I0318 15:08:39.576764 98190 dlrm_server.cc:302] Warmup complete, ran for 1.01147s.
I0318 15:08:39.593655 98197 dlrm_server.cc:302] Warmup complete, ran for 1.00358s.
I0318 15:08:39.735427 98192 dlrm_server.cc:302] Warmup complete, ran for 1.00064s.
I0318 15:08:39.780623 98195 dlrm_server.cc:302] Warmup complete, ran for 1.00245s.
I0318 15:08:39.834430 98191 dlrm_server.cc:302] Warmup complete, ran for 1.00291s.
I0318 15:08:39.894537 98196 dlrm_server.cc:302] Warmup complete, ran for 1.00039s.
I0318 15:08:39.898264 98180 main_dlrm.cc:251] Starting running actual test.
I0318 15:32:13.414834 98180 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786560.58

Min latency (ns)                : 217466
Max latency (ns)                : 67172593
Mean latency (ns)               : 2853490
50.00 percentile latency (ns)   : 2373938
90.00 percentile latency (ns)   : 4427187
95.00 percentile latency (ns)   : 5492278
97.00 percentile latency (ns)   : 6845476
99.00 percentile latency (ns)   : 13607457
99.90 percentile latency (ns)   : 31449042

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 15:32:19,423 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
User-item pairs per second: 482477981.761

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

[2021-03-18 15:32:22,489 __init__.py:255 INFO] Running command: CUDA_VISIBILE_ORDER=PCI_BUS_ID nvidia-smi --query-gpu=gpu_name,pci.device_id,uuid --format=csv
[2021-03-18 15:32:22,567 main.py:694 INFO] Detected System ID: A100-SXM-80GBx8
[2021-03-18 15:32:22,575 main.py:527 INFO] Using config files: configs/dlrm/Server/config.json
[2021-03-18 15:32:22,575 __init__.py:341 INFO] Parsing config file configs/dlrm/Server/config.json ...
[2021-03-18 15:32:22,576 main.py:540 INFO] Processing config "A100-SXM-80GBx8_dlrm_Server"
[2021-03-18 15:32:22,576 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 15:32:22,653 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 15:32:22,653 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-15.32.19/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.default.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 15:32:22,653 __init__.py:261 INFO] Overriding Environment
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : default
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-15.32.19
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 15:32:23.406103 98341 main_dlrm.cc:138] Found 8 GPUs
I0318 15:32:23.408305 98341 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 15:32:28.800318 98341 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 15:32:28.800360 98341 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 15:32:28.800377 98341 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 15:32:28.801059 98351 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 15:32:28.801537 98353 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 15:32:28.801674 98352 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 15:32:28.801798 98354 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 15:32:28.801959 98355 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 15:32:28.802106 98356 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 15:32:28.802188 98357 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 15:32:28.802250 98358 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 15:32:46.487825 98353 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:46.487882 98353 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:47.905683 98355 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:47.905740 98355 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:47.908568 98353 dlrm_server.cc:62] Setting profile = 0
I0318 15:32:47.908602 98353 dlrm_server.cc:65] Context creation complete
I0318 15:32:47.908855 98353 dlrm_server.cc:70] Created streams
I0318 15:32:47.908862 98353 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:32:47.908865 98353 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:32:47.908867 98353 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:32:55.551353 98351 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:55.551424 98351 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:58.340682 98354 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:58.340734 98354 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:58.343295 98357 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:58.343324 98357 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:59.762991 98355 dlrm_server.cc:62] Setting profile = 0
I0318 15:32:59.763026 98358 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:32:59.763049 98355 dlrm_server.cc:65] Context creation complete
I0318 15:32:59.763077 98358 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:32:59.764900 98355 dlrm_server.cc:70] Created streams
I0318 15:32:59.764915 98355 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:32:59.764922 98355 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:32:59.764927 98355 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.427630 98351 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.427685 98351 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.428529 98351 dlrm_server.cc:70] Created streams
I0318 15:33:01.428555 98351 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.428562 98351 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.428567 98351 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.466253 98356 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:33:01.466296 98356 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:33:01.510022 98354 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.510061 98354 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.510118 98354 dlrm_server.cc:70] Created streams
I0318 15:33:01.510170 98354 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.510217 98354 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.510226 98354 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.530742 98353 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:01.530771 98353 dlrm_server.cc:97] Setup complete
I0318 15:33:01.530804 98357 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.530851 98357 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.531309 98357 dlrm_server.cc:70] Created streams
I0318 15:33:01.531334 98357 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.531342 98357 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.531348 98357 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.544373 98353 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:01.597465 98352 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:33:01.597496 98352 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:33:01.672369 98356 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.672415 98356 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.672477 98356 dlrm_server.cc:70] Created streams
I0318 15:33:01.672485 98356 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.672492 98356 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.672497 98356 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.673408 98358 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.673468 98358 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.673532 98358 dlrm_server.cc:70] Created streams
I0318 15:33:01.673540 98358 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.673547 98358 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.673552 98358 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.892841 98352 dlrm_server.cc:62] Setting profile = 0
I0318 15:33:01.892887 98352 dlrm_server.cc:65] Context creation complete
I0318 15:33:01.893503 98352 dlrm_server.cc:70] Created streams
I0318 15:33:01.893560 98352 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:33:01.893566 98352 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:33:01.893573 98352 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:33:01.913802 98355 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:01.913848 98355 dlrm_server.cc:97] Setup complete
I0318 15:33:01.924968 98351 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:01.924994 98351 dlrm_server.cc:97] Setup complete
I0318 15:33:01.927191 98355 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:01.938331 98351 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.074275 98354 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:02.074331 98354 dlrm_server.cc:97] Setup complete
I0318 15:33:02.091807 98354 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.160923 98357 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:02.160977 98357 dlrm_server.cc:97] Setup complete
I0318 15:33:02.179986 98357 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.413789 98356 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:02.413839 98356 dlrm_server.cc:97] Setup complete
I0318 15:33:02.439431 98356 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.459770 98358 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:02.459821 98358 dlrm_server.cc:97] Setup complete
I0318 15:33:02.493866 98358 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.557996 98353 dlrm_server.cc:302] Warmup complete, ran for 1.02201s.
I0318 15:33:02.673874 98352 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:33:02.673935 98352 dlrm_server.cc:97] Setup complete
I0318 15:33:02.705214 98352 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:33:02.920562 98355 dlrm_server.cc:302] Warmup complete, ran for 1.00272s.
I0318 15:33:02.933960 98351 dlrm_server.cc:302] Warmup complete, ran for 1.005s.
I0318 15:33:03.081169 98354 dlrm_server.cc:302] Warmup complete, ran for 1.00272s.
I0318 15:33:03.171466 98357 dlrm_server.cc:302] Warmup complete, ran for 1.00677s.
I0318 15:33:03.420418 98356 dlrm_server.cc:302] Warmup complete, ran for 1.00303s.
I0318 15:33:03.466048 98358 dlrm_server.cc:302] Warmup complete, ran for 1.00315s.
I0318 15:33:03.679322 98352 dlrm_server.cc:302] Warmup complete, ran for 1.00078s.
I0318 15:33:03.683954 98341 main_dlrm.cc:251] Starting running actual test.
I0318 15:56:29.380378 98341 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786568.19

Min latency (ns)                : 205253
Max latency (ns)                : 70201755
Mean latency (ns)               : 2815866
50.00 percentile latency (ns)   : 2380289
90.00 percentile latency (ns)   : 4416757
95.00 percentile latency (ns)   : 5444464
97.00 percentile latency (ns)   : 6654038
99.00 percentile latency (ns)   : 11631399
99.90 percentile latency (ns)   : 27091823

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 15:56:35,474 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
[2021-03-18 15:56:35,475 main.py:224 INFO] Running harness for dlrm benchmark in Server scenario...
[2021-03-18 15:56:35,477 harness.py:246 INFO] Updated LD_PRELOAD: /usr/lib/x86_64-linux-gnu/libjemalloc.so.2
[2021-03-18 15:56:35,477 __init__.py:255 INFO] Running command: ./build/bin/harness_dlrm --plugins="build/plugins/DLRMInteractionsPlugin/libdlrminteractionsplugin.so,build/plugins/DLRMBottomMLPPlugin/libdlrmbottommlpplugin.so" --logfile_outdir="/work/build/logs/2021.03.18-15.32.19/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server" --logfile_prefix="mlperf_log_" --performance_sample_count=204800 --test_mode="PerformanceOnly" --gpu_batch_size=262100 --tensor_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy" --use_graphs=false --gpu_copy_streams=1 --complete_threads=1 --sample_partition_path="${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy" --gpu_inference_streams=1 --gpu_num_bundles=2 --start_from_device=true --gpu_engines="./build/engines/A100-SXM-80GBx8/dlrm/Server/dlrm-Server-gpu-b262100-int8.high_accuracy.plan" --mlperf_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/mlperf.conf" --user_conf_path="measurements/GIGABYTE_G492-ZD0_A100-SXM-80GBx8/dlrm-99.9/Server/user.conf" --scenario Server --model dlrm
[2021-03-18 15:56:35,477 __init__.py:261 INFO] Overriding Environment
User-item pairs per second: 482477981.761
coalesced_tensor : True
enable_interleaved_top_mlp : False
gpu_copy_streams : 1
gpu_inference_streams : 1
input_dtype : int8
input_format : chw4
output_padding_granularity : 128
precision : int8
sample_partition_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/sample_partition.npy
tensor_path : ${PREPROCESSED_DATA_DIR}/criteo/full_recalib/numeric_int8_chw4.npy,${PREPROCESSED_DATA_DIR}/criteo/full_recalib/categorical_int32.npy
use_cuda_thread_per_device : False
use_graphs : False
complete_threads : 1
config_ver : high_accuracy
gemm_plugin_fairshare_cache_size : 18
gpu_batch_size : 262100
gpu_num_bundles : 2
server_target_qps : 1785000
start_from_device : True
use_jemalloc : True
use_small_tile_gemm_plugin : False
system_id : A100-SXM-80GBx8
scenario : Server
benchmark : dlrm
config_name : A100-SXM-80GBx8_dlrm_Server
accuracy_level : 99.9%
optimization_level : plugin-enabled
inference_server : custom
system_name : GIGABYTE_G492-ZD0_A100-SXM-80GBx8
test_mode : PerformanceOnly
log_dir : /work/build/logs/2021.03.18-15.32.19
&&&& RUNNING DLRM_HARNESS # ./build/bin/harness_dlrm
I0318 15:56:36.102650 98385 main_dlrm.cc:138] Found 8 GPUs
I0318 15:56:36.104831 98385 main_dlrm.cc:182] Loaded 330067 sample partitions. (1320272) bytes.
I0318 15:56:42.283023 98385 dlrm_qsl.hpp:42] PerformanceSampleCount: 204800
I0318 15:56:42.283074 98385 dlrm_qsl.hpp:43] TotalSampleCount: 330067 (89137319 pairs).
I0318 15:56:42.283092 98385 dlrm_server.cc:345] Using 1 DLRM Core(s)
I0318 15:56:42.283598 98395 dlrm_server.cc:652] Deserializing Engine on GPU#0
I0318 15:56:42.284533 98399 dlrm_server.cc:652] Deserializing Engine on GPU#4
I0318 15:56:42.284626 98398 dlrm_server.cc:652] Deserializing Engine on GPU#3
I0318 15:56:42.284732 98397 dlrm_server.cc:652] Deserializing Engine on GPU#2
I0318 15:56:42.284857 98401 dlrm_server.cc:652] Deserializing Engine on GPU#6
I0318 15:56:42.285113 98400 dlrm_server.cc:652] Deserializing Engine on GPU#5
I0318 15:56:42.285157 98402 dlrm_server.cc:652] Deserializing Engine on GPU#7
I0318 15:56:42.285187 98396 dlrm_server.cc:652] Deserializing Engine on GPU#1
I0318 15:57:00.935587 98398 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:00.935657 98398 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:02.378482 98395 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:02.378520 98395 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:02.431836 98401 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:02.431900 98401 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:03.975350 98398 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:03.975425 98398 dlrm_server.cc:65] Context creation complete
I0318 15:57:03.977149 98398 dlrm_server.cc:70] Created streams
I0318 15:57:03.977177 98398 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:03.977185 98398 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:03.977192 98398 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:11.658150 98396 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:11.658156 98401 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:11.658309 98396 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:11.658351 98401 dlrm_server.cc:65] Context creation complete
I0318 15:57:11.659700 98401 dlrm_server.cc:70] Created streams
I0318 15:57:11.659718 98401 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:11.659724 98401 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:11.659730 98401 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:14.471176 98397 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:14.471230 98397 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:14.512953 98395 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:14.513016 98395 dlrm_server.cc:65] Context creation complete
I0318 15:57:14.513082 98395 dlrm_server.cc:70] Created streams
I0318 15:57:14.513111 98395 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:14.513118 98395 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:14.513123 98395 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:15.927326 98402 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:15.927386 98402 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:15.948899 98396 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:15.948959 98396 dlrm_server.cc:65] Context creation complete
I0318 15:57:15.948999 98396 dlrm_server.cc:70] Created streams
I0318 15:57:15.949007 98396 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:15.949014 98396 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:15.949021 98396 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:15.949527 98399 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:15.949599 98399 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:15.996742 98400 dlrm_server.cc:659] Engine - Device Memory requirements: 536780800
I0318 15:57:15.996765 98400 dlrm_server.cc:660] Engine - Number of Optimization Profiles: 1
I0318 15:57:16.012040 98397 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:16.012115 98397 dlrm_server.cc:65] Context creation complete
I0318 15:57:16.014585 98397 dlrm_server.cc:70] Created streams
I0318 15:57:16.014600 98397 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:16.014607 98397 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:16.014614 98397 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:16.036057 98398 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.036139 98398 dlrm_server.cc:97] Setup complete
I0318 15:57:16.051067 98398 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.119535 98399 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:16.119602 98399 dlrm_server.cc:65] Context creation complete
I0318 15:57:16.119638 98399 dlrm_server.cc:70] Created streams
I0318 15:57:16.119647 98399 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:16.119659 98399 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:16.119664 98399 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:16.121933 98402 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:16.121997 98402 dlrm_server.cc:65] Context creation complete
I0318 15:57:16.122654 98402 dlrm_server.cc:70] Created streams
I0318 15:57:16.122665 98402 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:16.122671 98402 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:16.122678 98402 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:16.151774 98401 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.151835 98401 dlrm_server.cc:97] Setup complete
I0318 15:57:16.165119 98401 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.184080 98400 dlrm_server.cc:62] Setting profile = 0
I0318 15:57:16.184144 98400 dlrm_server.cc:65] Context creation complete
I0318 15:57:16.184805 98400 dlrm_server.cc:70] Created streams
I0318 15:57:16.184890 98400 dlrm_server.cc:77] Profile - Numeric Input Volume: 16
I0318 15:57:16.184897 98400 dlrm_server.cc:79] Profile - Categorical Input Volume: 26
I0318 15:57:16.184902 98400 dlrm_server.cc:81] Profile - Output Volume: 1
I0318 15:57:16.278244 98395 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.278296 98395 dlrm_server.cc:97] Setup complete
I0318 15:57:16.290969 98395 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.445952 98396 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.446010 98396 dlrm_server.cc:97] Setup complete
I0318 15:57:16.459208 98396 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.544467 98397 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.544528 98397 dlrm_server.cc:97] Setup complete
I0318 15:57:16.559116 98397 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.818615 98399 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.818699 98399 dlrm_server.cc:97] Setup complete
I0318 15:57:16.832796 98399 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.861991 98402 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.862066 98402 dlrm_server.cc:97] Setup complete
I0318 15:57:16.879226 98402 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:16.894623 98400 dlrm_server.cc:96] Created copy streams and buffers
I0318 15:57:16.894692 98400 dlrm_server.cc:97] Setup complete
I0318 15:57:16.924176 98400 dlrm_server.cc:285] Running warmup for 1s.
I0318 15:57:17.055464 98398 dlrm_server.cc:302] Warmup complete, ran for 1.01461s.
I0318 15:57:17.160013 98401 dlrm_server.cc:302] Warmup complete, ran for 1.00373s.
I0318 15:57:17.289176 98395 dlrm_server.cc:302] Warmup complete, ran for 1.00694s.
I0318 15:57:17.453965 98396 dlrm_server.cc:302] Warmup complete, ran for 1.00427s.
I0318 15:57:17.552815 98397 dlrm_server.cc:302] Warmup complete, ran for 1.00406s.
I0318 15:57:17.824945 98399 dlrm_server.cc:302] Warmup complete, ran for 1.00249s.
I0318 15:57:17.866636 98402 dlrm_server.cc:302] Warmup complete, ran for 1.0002s.
I0318 15:57:17.901185 98400 dlrm_server.cc:302] Warmup complete, ran for 1.00133s.
I0318 15:57:17.905620 98385 main_dlrm.cc:251] Starting running actual test.
I0318 16:21:02.250926 98385 main_dlrm.cc:256] Finished running actual test.
================================================
MLPerf Results Summary
================================================
SUT name : DLRM SERVER
Scenario : Server
Mode     : PerformanceOnly
Scheduled samples per second : 1786571.78
Result is : VALID
  Performance constraints satisfied : Yes
  Min duration satisfied : Yes
  Min queries satisfied : Yes

================================================
Additional Stats
================================================
Completed samples per second    : 1786561.86

Min latency (ns)                : 200215
Max latency (ns)                : 64450637
Mean latency (ns)               : 2884192
50.00 percentile latency (ns)   : 2434926
90.00 percentile latency (ns)   : 4542675
95.00 percentile latency (ns)   : 5590288
97.00 percentile latency (ns)   : 6794729
99.00 percentile latency (ns)   : 11970413
99.90 percentile latency (ns)   : 28184517

================================================
Test Parameters Used
================================================
samples_per_query : 1
target_qps : 1.785e+06
target_latency (ns): 30000000
max_async_queries : 0
min_duration (ms): 600000
max_duration (ms): 0
min_query_count : 270336
max_query_count : 0
qsl_rng_seed : 7322528924094909334
sample_index_rng_seed : 1570999273408051088
schedule_rng_seed : 3507442325620259414
accuracy_log_rng_seed : 0
accuracy_log_probability : 0
accuracy_log_sampling_target : 0
print_timestamps : 0
performance_issue_unique : 0
performance_issue_same : 0
performance_issue_same_index : 0
performance_sample_count : 204800

9 warnings encountered. See detailed log.

No errors encountered during test.
[2021-03-18 16:21:08,531 main.py:280 INFO] Result: result_scheduled_samples_per_sec: 1786570.0, Result is VALID
User-item pairs per second: 482477981.761

======================= Perf harness results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: result_scheduled_samples_per_sec: 1786570.0, Result is VALID


======================= Accuracy results: =======================

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-default-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

GIGABYTE_G492-ZD0_A100-SXM-80GBx8-high_accuracy-Server:
    dlrm: No accuracy results in PerformanceOnly mode.

